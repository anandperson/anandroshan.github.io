{"version":3,"sources":["components/UploadModal/UploadModal.js","components/ChatPanel/ChatPanel.js"],"names":["UploadModal","props","React","useState","attachments","setAttachments","imgs","setImgs","dragclass","setDragclass","fileToDataURL","file","reader","FileReader","Promise","resolve","reject","onload","event","target","result","readAsDataURL","handleFiles","files","a","temp","console","log","filesArray","all","map","f","fileChange","Dialog","maxWidth","fullWidth","open","onClose","handleClose","aria-labelledby","className","DialogContent","DialogTitle","id","Paper","variant","square","onDrop","e","preventDefault","stopPropagation","dataTransfer","handleDrop","onDragOver","handleDragOver","onDragEnter","handleDragEnter","onDragLeave","handleDragLeave","onClick","document","querySelector","contains","getElementById","click","handleClick","i","src","temp2","removeFile","type","multiple","onChange","style","display","DialogActions","Button","backgroundColor","onSubmit","HandShake","placement","fontSize","paddingRight","opacity","text","paddingLeft","OrderPreview","plan","purchase","data","currency","gig","subject","List","features","item","ListItem","ListItemIcon","ListItemText","feature","extras","amount","undefined","fast","days","fastPrice","fee","WithUserImage","Avatar","image","alt","name","displayName","ChatPanel","setOpen","modal","setModal","reviewModal","setReviewModal","setText","rating","setRating","user","setUser","creator","setCreator","setGig","setPurchase","chat","setChat","setLog","msg","setMessage","attachment","setAttachment","feedback","setFeedback","submitAttachments","setSubmitAttachments","attachmentUrl","setAttachmentUrl","messagesEnd","setMessagesEnd","useEffect","scrollToBottom","getData","order_id","_id","postid","getGigChat","then","resp","lo","JSON","parse","removeAttachment","value","scrollIntoView","behavior","Spinner","sellerPanel","panel","buyerPanel","showAccept","status","showSend","profilePic","avatar","Fab","size","color","aria-label","ref","el","switchLoader","statusAt","Date","toISOString","da","gigStatusUpdate","updateStatus","err","alertBox","message","dat","transfer_id","refid","gigRelease","c","sender","userid","currentUser","pic","href","attachmentType","released","review","val","length","gigSubmit","purchaseId","displayModal","closeModal","fontWeight","marginBottom","marginLeft","textAlign","l","r","backgroundImage","contenttype","content_url","window","borderTop","Status","Message","padding","borderRadius","for","title","placeholder","rows","purchaseid","gigRating","TextField","receiver","addGigChat","push"],"mappings":"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","file":"static/js/14.d7819391.chunk.js","sourcesContent":["import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Paper from '@material-ui/core/Paper';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport \"./Upload.scss\";\n\nexport default function UploadModal(props) {\n\n  const [attachments, setAttachments] = React.useState([]);\n  const [imgs, setImgs] = React.useState([]);\n  const [dragclass, setDragclass] = React.useState('');\n\n  const handleDragEnter = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    setDragclass('enter');\n  };\n\n  const handleDragLeave = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    setDragclass('');\n  };\n\n  const handleDragOver = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    setDragclass('over');\n  };\n\n  const handleDrop = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    setDragclass('');\n    let dt = e.dataTransfer\n    let files = dt.files\n    handleFiles(files);\n  };\n  const   addToGallery = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    setDragclass('');\n    console.log(e.target.files);\n    handleFiles(e.target.files);\n  };\n  const handleClick = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    var el = document.querySelector(\".droppedFiles\");\n    if(!el.contains(e.target)){\n    document.getElementById('gallery').click();\n    }\n  };\n  const fileToDataURL = (file) => {\n    var reader = new FileReader()\n    return new Promise(function (resolve, reject) {\n      reader.onload = function (event) {\n        resolve(event.target.result)\n      }\n      reader.readAsDataURL(file)\n    })\n  }  \n  \n  const readAsDataURL = (filesArray) => {\n    // target => <input type=\"file\" id=\"file\">\n    // console.log(target);\n    // var filesArray = Array.prototype.slice.call(target.files)      \n    return Promise.all(filesArray.map(fileToDataURL))\n  }\n\n  const handleFiles = async (files) => {\n    var temp = [...attachments, ...files];\n    console.log(temp);\n    var f = await readAsDataURL(temp);\n    console.log(f);\n    setImgs(f);\n    setAttachments(temp);\n    props.fileChange(temp)\n  }\n\n  const removeFile = (i) => {\n    var temp = [...attachments];\n    var temp2 = [...imgs];\n    delete temp[i];\n    delete temp2[i];\n    setAttachments(temp);\n    setImgs(temp2);\n    props.fileChange(temp);\n  }\n\n  return (\n      <Dialog maxWidth='md' fullWidth={true} open={props.open} onClose={props.handleClose}\n        aria-labelledby=\"max-width-dialog-title\" className=\"upload-file-modal\">\n        \n        <DialogContent>\n           <div className=\"dialog-upload-desc\">\n                <div className=\"upload-btn\">\n                <DialogTitle id=\"max-width-dialog-title\" className=\"dialog-title\">\n            Upload all necessary files\n        </DialogTitle>\n                </div>\n                <div className=\"upload-note\">\n                <span className=\"note-text\">Note:</span> Befor submitting the files,\n                 make sure your customer is happy and has no more changes for smooth payment release\n                </div>\n           </div>\n           <Paper variant=\"outlined\" square className={\"uploadArea \"+dragclass} onDrop={e => handleDrop(e)}\n                                  onDragOver={e => handleDragOver(e)}\n                                  onDragEnter={e => handleDragEnter(e)}\n                                  onDragLeave={e => handleDragLeave(e)} \n                                  onClick={e => handleClick(e)}\n                                  >\n               {/* <div className=\"files-container\">\n                    <div className=\"uploaded-file\">\n                        <Paper variant=\"outlined\" square className=\"uploaded-files\" >\n                        </Paper>\n                        <div className=\"file-name\">Logo1.jpg</div>\n                    </div>\n                    <div className=\"uploaded-file\">\n                        <Paper variant=\"outlined\" square className=\"uploaded-files\" >\n                        </Paper>\n                        <div className=\"file-name\">Logo2.jpg</div>\n                    </div>\n                    <div className=\"uploaded-file\">\n                        <Paper variant=\"outlined\" square className=\"uploaded-files\" >\n                        </Paper>\n                        <div className=\"file-name\">Logo3.jpg</div>\n                    </div>\n               </div> */}\n               <div className=\"droppedFiles\">\n               {\n                                      imgs.map((f, i)=>{\n                                        return <div className=\"file\">\n                                          <img src={f} />\n                                          <i className=\"fa fa-times\" onClick={()=> removeFile(i)}></i>\n                                        </div>\n                                      })\n                                    }\n                                    </div>\n               <div className=\"drag-droup\">Browse / Drag and drop</div>\n            </Paper>\n            <input type=\"file\" multiple id=\"gallery\" onChange={addToGallery} style={{display: \"none\"}} />\n        </DialogContent>\n        <DialogActions>\n        <Button variant=\"contained\" style={{ backgroundColor: \"#5931ea\"}} className=\"submit-payment\" onClick={props.onSubmit}>\n          Submit for approval and payment\n        </Button>\n        </DialogActions>\n      </Dialog>\n  );\n}\n","import React from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\nimport Fab from '@material-ui/core/Fab';\nimport ThumbUpIcon from '@material-ui/icons/ThumbUp';\nimport AccessTimeIcon from '@material-ui/icons/AccessTime';\nimport AttachFileIcon from '@material-ui/icons/AttachFile';\nimport Avatar from '@material-ui/core/Avatar';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport PermScanWifiOutlinedIcon from '@material-ui/icons/PermScanWifiOutlined';\nimport CheckIcon from '@material-ui/icons/Check';\nimport TextField from '@material-ui/core/TextField';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Spinner from '../Spinner'\nimport UploadModal from '../UploadModal/UploadModal';\nimport Modal from '../../components/Popup';\nimport {addGigChat, getGigChat, gigStatusUpdate, gigSubmit, gigRating} from '../../http/gig-calls';\nimport \"./Chat.scss\";\nimport { profilePic, pic } from '../../globalFunctions';\nimport { alertBox, switchLoader } from '../../commonRedux';\nimport { gigRelease } from '../../http/wallet-calls';\n\nexport function HandShake(props) {\n  return (\n    <div className=\"hand-shake\">\n      {props.placement===\"start\" &&\n        <ThumbUpIcon fontSize=\"large\" style={{paddingRight: \"8px\" }}/> \n      }\n        <span style={{ fontSize: \"14px\", opacity:'.5' }}>{props.text}</span>\n      {props.placement===\"end\" &&\n        <ThumbUpIcon fontSize=\"large\" style={{paddingLeft: \"8px\" }}/> \n      }\n    </div>\n  )\n}\nexport function OrderPreview(props) {  \n  const plan = props.purchase.data.plan;\n  return (\n    <Paper variant=\"outlined\" square className=\"chat-payment-details\" >\n      <div className=\"payment-option\">\n        <div className=\"payment-title\">\n          {props.purchase.data.plan}\n        </div>\n        <div className=\"payment-cost\">\n          {props.purchase.currency +\" \"+props.gig[props.purchase.data.plan+\"Price\"]}\n        </div>\n      </div>\n      <div className=\"order-item font12 font-bold\">{props.gig.subject}</div>\n      <div className=\"order-description font12 \">Package includes the following features</div>\n      <List className=\"order-requirement\">\n      {\n      props.gig.features.map((item) => (\n        item !=null && item[props.purchase.data.plan] == 1 ? <ListItem>\n          <ListItemIcon>\n            <CheckIcon />\n          </ListItemIcon>\n          <ListItemText>{item.feature}\n            </ListItemText>\n        </ListItem>\n        : null         \n        \n      ))\n      }\n      {\n      props.purchase.data.extras.map((item) => (                  \n        <ListItem>\n          <ListItemIcon>\n            <CheckIcon />\n          </ListItemIcon>\n          <ListItemText>{item.feature}\n          <span className=\"pull-right\">{props.purchase.currency} {item.amount}</span>\n            </ListItemText>\n        </ListItem>                  \n      ))\n      }\n      </List>\n      <div className=\"delivery-details\">\n        <div className=\"delivery-days\">\n          <AccessTimeIcon /> <span className={props.purchase.data.fast == undefined ? '' : 'strike'}>{props.gig[plan+\"Days\"]} days delivery</span>\n        </div>\n        <List className=\"order-requirement\">\n        {\n        props.purchase.data.fast != undefined && <ListItem>\n        \n          <ListItemText>Extra Fast {props.purchase.data.days} Day(s) Delivery\n          <span className=\"pull-right\">{props.purchase.currency +\" \"+props.gig.fastPrice}</span>\n            </ListItemText>\n        </ListItem>\n}\n{\n  props.purchase.data.fee != undefined &&  <ListItem>\n        \n  <ListItemText>Service Fee\n  <span className=\"pull-right\">{props.purchase.currency +\" \"+props.purchase.data.fee}</span>\n    </ListItemText>\n</ListItem>\n}\n</List>\n      </div>\n     \n\n\n      \n      <div className=\"payment-total\">\n        <div className=\"payment-title font12\">\n          TOTAL\n        </div>\n        <div className=\"payment-cost font-bold\">\n        {props.purchase.currency +\" \"+props.purchase.amount}\n        </div>\n      </div>\n    </Paper>\n  )\n}\nexport function WithUserImage(props) {\n  return (\n    <div className=\"user-image-chat\">\n      <div className=\"user-image\">\n        <Avatar src={props.data.image}  alt={props.data.name} />\n      </div>\n      <div className=\"user-name-chat\">\n        {props.displayName &&\n          <div className=\"chat-user-name\">{props.data.name}</div>\n        }\n        <div className=\"chat-user-text\">{props.text}</div>\n      </div>\n    </div>\n  )\n}\n\nexport default function ChatPanel(props) {\n  const [open, setOpen] = React.useState(false);\n  const [modal, setModal] = React.useState(false);\n  const [reviewModal, setReviewModal] = React.useState(false);\n  const [text, setText] = React.useState('');\n  const [rating, setRating] = React.useState(0);\n  const [user, setUser] = React.useState(null);\n  const [creator, setCreator] = React.useState(null);\n  const [gig, setGig] = React.useState(null);\n  const [purchase, setPurchase] = React.useState(null);\n  const [chat, setChat] = React.useState([]);\n  const [log, setLog] = React.useState(null);\n  const [msg, setMessage] = React.useState('');\n  const [attachment, setAttachment] = React.useState(null);\n  const [feedback, setFeedback] = React.useState(null);\n  const [submitAttachments, setSubmitAttachments] = React.useState([]);\n  const [attachmentUrl, setAttachmentUrl] = React.useState('');\n  const[messagesEnd, setMessagesEnd] = React.useState(null);\n\n  React.useEffect(()=>{\n    scrollToBottom();\n    getData();\n  },[props.chat])\n\n  const getData = () => {\n    if(props.chat != null){\n      var data = {\n        order_id : props.chat._id,\n        gig: props.chat.postid\n      };\n      getGigChat(data).then(resp=>{\n        setUser(resp.user);\n        setCreator(resp.creator);\n        setGig(resp.gig);\n        setPurchase(resp.purchase);\n        setChat(resp.chat);\n        setFeedback(resp.rating);\n        console.log(resp.log);\n        if(resp.log != null){\n        var lo = resp.log;\n        lo.attachments = JSON.parse(lo.attachments);\n        setLog(lo);\n        }\n        scrollToBottom();\n      })\n    }\n  }\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n  const modalOpen = () => {\n    setOpen(true);\n  };\n\n  const sendMsg = () => {\n    var data = {\n      purchaseid: purchase._id,\n      receiver: props.panel == 'seller' ? purchase.userid : gig.userid,\n      message: msg,\n      \n    };\n    if(attachment != null){\n      data.file = attachment;\n    }\n    addGigChat(data).then(resp => {\n      setMessage('');\n      removeAttachment();\n      var temp = [...chat];\n      temp.push(resp);\n      setChat(temp);\n    }, err=> {\n      alertBox(true, err.data.message);\n    })\n  }\n\n  const accept = () => {\n    switchLoader(true, \"Please wait...\");\n    var data = purchase.data;\n    data.statusAt = new Date().toISOString();\n    var st = 2;\n    var da = {\n      data: data,\n      status: st,\n      id: purchase._id\n    };\n    gigStatusUpdate(da).then(resp=>{\n      switchLoader();\n      var temp = {...purchase};\n      temp.status = st;\n      console.log(temp);\n      setPurchase(temp);\n      props.updateStatus(st);\n    }, err=>{\n      switchLoader();\n      alertBox(true, err.data.message);\n    });\n  };\n\n  const reject = () => {\n    switchLoader(true, \"Please wait...\");\n    var dat = {\n      transfer_id : purchase.data.refid,\n      status: \"cancel\"\n    };\n    gigRelease(dat).then(resp => {\n    var data = purchase.data;\n    data.statusAt = new Date().toISOString();\n    var st = -1;\n    var da = {\n      data: data,\n      status: st,\n      id: purchase._id\n    };\n    gigStatusUpdate(da).then(resp=>{\n      switchLoader();\n      var temp = {...purchase};\n      temp.status = st;\n      setPurchase(temp);\n      props.updateStatus(st);\n    }, err=>{\n      switchLoader();\n      alertBox(true, err.data.message);\n    });\n  }, err => {\n    switchLoader();\n    alertBox(true, err.data.message);\n  })\n  };\n\n  const release = () => {\n    switchLoader(true, \"Please wait...\");\n    \n    var dat = {\n      transfer_id : purchase.data.refid,\n      status: \"confirm\"\n    };\n    gigRelease(dat).then(resp => {\n      console.log(resp);\n      if(resp.Status == true){\n        var data = purchase.data;\n        data.released = true;\n        var st = 3;\n        var da = {\n          data: data,\n          status: st,\n          id: purchase._id\n        };\n        gigStatusUpdate(da).then(resp=>{\n          switchLoader();\n          var temp = {...purchase};\n          temp.data = data;\n          setPurchase(temp);\n          \n        }, err=>{\n          switchLoader();\n          alertBox(true, err.data.message);\n        });\n      }else{\n        switchLoader();\n          alertBox(true, resp.Message);\n      }\n    }, err => {\n      switchLoader();\n      alertBox(true, err.data.message);\n    })\n    \n  };\n\n  const review = () => {\n    if(rating == 0 || text == ''){\n      alertBox(true,  \"Please give both rating and review\");\n    }else{\n    switchLoader(true, \"Please wait...\");\n        var da = {\n          postid: gig._id,\n          purchaseid: purchase._id,\n          rating: rating,\n          review: text,\n        };\n        gigRating(da).then(resp=>{\n          setReviewModal(false);\n          switchLoader();\n          getData();\n        }, err=>{\n          switchLoader();\n          alertBox(true, err.data.message);\n        });\n      }\n  };\n \n  // handel for Buyer can view all files and release the payment to seller\n  const selectModal = () => {\n    setModal(!modal)\n  }\n  const openReleaseModal = () => {\n    setModal(true)\n  }\n\n  // handle change for feedback text area\n  const openReviewModal = () => {\n    setReviewModal(true);\n  };\n  const openCloseModal =()=>{\n    setReviewModal(!reviewModal);\n  }\n  const handleChange = (e) => {\n    setText(e.target.value)\n  }\n\n  const handleAttachment = (e) => {\n    var file = e.target.files[0];\n    setAttachment(file);\n    var reader  = new FileReader();\n    // it's onload event and you forgot (parameters)\n      reader.onload = function(e)  {\n          // var image = document.getElementById(name+\"_preview\");\n          // image.src = e.target.result;\n          setAttachmentUrl(e.target.result);\n      }\n      // you have to declare the file loading\n      reader.readAsDataURL(file);\n  }\n\n  const removeAttachment = () => {\n    setAttachmentUrl('');\n    setAttachment(null);\n    document.getElementById(\"attachment\").value = null;\n  }\n\n  const handleSubmit = () => {\n    if(submitAttachments.length <= 0){\n      alertBox(true, \"You need to choose at least one file to submit\");\n    }else{\n      switchLoader(true, \"Submitting, Please wait...\");\n      setOpen(false);\n      var data ={\n        file: submitAttachments,\n        id: purchase._id\n      }\n      gigSubmit(data).then(resp => {\n        switchLoader();\n        alertBox(true, \"Gig submitted for approval\", \"success\");\n        props.updateStatus(3);\n        getData();\n      }, err => {\n        switchLoader();\n        alertBox(true, err.data.message);\n      });\n    }\n  }\n  const scrollToBottom = () => {\n    if(messagesEnd != null){\n    messagesEnd.scrollIntoView({ behavior: \"smooth\" });\n    }\n  }\n  const data = props.chat;\n  if(data == null || user == null || gig == null || purchase == null){\n    return (<div>\n      <Spinner />\n    </div>);\n  }else{\n  data.sellerPanel = props.panel == \"seller\" ? true : false;\n  data.buyerPanel = props.panel == \"buyer\" ? true : false;\n  const showAccept = data.sellerPanel && purchase.status == 1;\n  const showSend =  purchase.status === 2;\n  return (\n        <Paper variant=\"outlined\" square className={\"chat-panel \" + (showSend ? \"accepted-view\" : \" pending-view\")} >\n          <div className=\"chat-header\">\n            <div className=\"chat-user-info\">\n              <Avatar src={profilePic(user.avatar)}  alt={user.name} />\n              <span className=\"chat-user-name\">{user.name}</span>\n            </div>\n            {data.sellerPanel && purchase.status === 2 &&\n              <div className=\"buyer-submit\">\n                <div className=\"buyer-submit-text\">Submit all files for payment release</div>\n                <div>\n                  <Fab variant=\"extended\" size=\"small\" color=\"primary\" aria-label=\"add\" onClick={() => {setOpen(true)}} >\n                    Submit &amp; close the project\n                  </Fab>\n                </div>\n              </div>\n            }\n          </div>\n          <div className=\"chat-container\"  ref={(el) => { setMessagesEnd(el); }}>\n            <div className=\"chat-text-area\">\n\n            <div className=\"chat-content buyer-chat\">\n                  <HandShake placement=\"start\" text=\"Handshake initiated\" />\n            </div>\n\n            <div className=\"chat-content buyer-chat\">\n              <OrderPreview gig={gig} purchase={purchase} />\n            </div>\n            \n            {\n              data.buyerPanel &&\n              <>\n                {\n                  purchase.status == 1 &&\n                <div className=\"chat-content buyer-chat\">\n                  <WithUserImage displayName={true} data={data}\n                    text=\"Waiting for mutal handshake from the seller\" />\n                </div>\n                }\n              </>\n            }\n\n            {\n              purchase.status == 2 && \n                <div className=\"chat-content seller-chat\">\n                  <div className=\"user-image-hand\">\n                      {/* {data.buyerPanel &&\n                        <Avatar src={user.image}  alt={user.name} />\n                      } */}\n                      <HandShake placement={data.buyerPanel ? \"end\" : \"start\" } text=\"Handshake Accepted\" />\n                  </div>\n              </div>\n            }\n\n              \n            </div>\n            {showAccept &&\n            <div className=\"chat-accept\">\n              <div className=\"accept-total text-center\">\n                <div className=\"total-amount\">{purchase.currency} {purchase.amount}</div>\n                <Button onClick={accept} variant=\"contained\" style={{ backgroundColor: \"#8bc34a\"}}>\n                Accept Handshake</Button>\n              </div>\n              <div><Button onClick={reject} variant=\"contained\" style={{ backgroundColor: \"#ff3d00\"}}>Reject</Button></div>\n            </div>\n            }\n\n            {\n              chat.map((c, i) => {\n                return <div className={\"chat-content \"+(c.sender == gig.userid ? 'seller' : 'buyer')+\"-chat\"}>\n                    <div className=\"user-image-hand\">\n                      \n                      {\n                        c.sender != props.currentUser._id && <Avatar className=\"chatPic\" src={pic(data.buyerPanel ? creator.avatar : user.avatar)}  alt={data.buyerPanel ? creator.name : user.name} />\n                      }  \n                        <p className=\"message\">\n                          {c.message}\n\n                          {\n                          c.attachment != undefined && c.attachment != null && c.attachment != '' && <div className=\"chat-attach\">\n                            <a href={c.attachment} target=\"_blank\">\n                              {\n                                c.attachmentType == 'Image' ? <img src={c.attachment} /> :\n                                <><i className=\"fa fa-file\"></i> view attachment</>\n                              }\n                              \n                            </a>\n                          </div>\n                        }\n                        </p>\n                        \n                      {\n                        c.sender == props.currentUser._id && <Avatar className=\"chatPic\" src={pic(props.currentUser.avatar)}  alt={props.currentUser.name} />\n                      }                      \n                    </div>\n                </div>\n              })\n            }\n\n{\n                purchase.status == 3 &&\n                <div className=\"chat-content seller-chat\">\n                  <div className=\"d-flex align-items-start \">\n                  {\n                    // c.sender != props.currentUser._id && <Avatar className=\"chatPic\" src={pic(data.buyerPanel ? creator.avatar : user.avatar)}  alt={data.buyerPanel ? creator.name : user.name} />\n                    data.buyerPanel && <Avatar className=\"chatPic\" src={pic(user.avatar)}  alt={user.name} />\n                  }\n                  {\n                    data.buyerPanel ? <p className=\"message\">{user.name + \" has submitted all the files. Release the  payments and download the file.\"}</p> : <p className=\"message\">{\" You have submitted the files and closed the project\"}</p>\n                  }\n                     {\n                    // c.sender != props.currentUser._id && <Avatar className=\"chatPic\" src={pic(data.buyerPanel ? creator.avatar : user.avatar)}  alt={data.buyerPanel ? creator.name : user.name} />\n                    data.sellerPanel && <Avatar className=\"chatPic\" src={pic(creator.avatar)}  alt={creator.name} />\n                  }\n                  \n                  </div>\n                  {data.buyerPanel  && <div className=\"release-payment\">\n                    <div className=\"release-payment-logo\">\n                      <PermScanWifiOutlinedIcon />\n                    </div>\n                    <div className=\"release-payment-btn\">\n                      <Button variant=\"contained\" style={{ backgroundColor: \"#5931ea\"}} onClick={openReleaseModal}>\n                        {\n                          purchase.data.released ? 'View Files' : 'Release Payment and View Files'\n                        }\n                      </Button>\n                    </div>\n                    {/* <div className=\"release-payment-text\">FOUNDATION</div> */}\n                    {\n                      feedback == null ? <div className=\"release-payment-btn\">\n                      <Button variant=\"contained\" style={{ backgroundColor: \"#5931ea\"}} onClick={openReviewModal}>\n                        Feedback\n                      </Button>\n                    </div>\n                    :\n                    <div>\n                      <p className=\"rating-text\">\n                        {\n                          [1,2,3,4,5].map((e,i)=>{\n                            if(e <= feedback.rating){\n                              return <i className=\"fa fa-star\"></i>\n                            }else{\n                              return <i className=\"fa fa-star-o\"></i>\n                            }\n                          })\n                        }\n                      </p>\n                      <p className=\"review-text\">\"{feedback.review}\"</p>\n                    </div>\n                    }\n                    \n                  </div>}\n                </div>\n              }\n\n        \n            {\n            open && data.sellerPanel && <UploadModal handleClose={handleClose} open={open} fileChange={(val) => {setSubmitAttachments(val)}}  onSubmit={handleSubmit} purchaseId={purchase._id} />\n            }\n          {/* modal for Buyer can view all files and release the payment to seller */}\n          <Modal displayModal={modal} closeModal={selectModal} >\n            <div className='review-modal'>\n              <div className=\"d-flex align-items-center\">\n                <div className='container mt-4 purchase-modal'>\n                  <h5 style={{ fontWeight: 'bold', marginBottom: '1rem', marginLeft:'0.5rem' }} >All files</h5>\n                  <div className='row'>\n                    <div className='col down-hold' style={{textAlign: 'center'}}>\n                      {\n                        purchase.data.released ? \n                        log != null && log.attachments != undefined && log.attachments.map((l, r) => {\n                          return <div className=\"down-item\" style={{backgroundImage: l.contenttype == 'Image' ? `url(${l.content_url})` : ''}}>\n                            \n                            <button type=\"button\" className=\"review-btn\"  onClick={() => {window.open(l.content_url)}}> Download </button>\n                          </div> \n                        })\n                        :\n                        log != null && log.attachments != undefined && log.attachments.map((l, r) => {\n                          return <div className=\"down-item\">\n                            <i className=\"fa fa-eye-slash\"></i>\n                          </div>\n                        })\n                      }\n                    </div>\n                  </div>\n                  <br/>\n                  <br/>\n                  <br/>\n                  <br/>\n                </div>\n              </div>\n              {\n                purchase.data.released ? null : <div className=\"modal-footer\" style={{ borderTop: 'none' }}>\n                Release the full payment to download all original files<button type=\"button\" className=\"review-btn\" style={{marginLeft: '1rem'}} onClick={release}> Release </button>\n              </div>\n              }\n              \n            </div>\n          </Modal>\n\n          {/* feedback modal */}\n          <Modal displayModal={reviewModal} closeModal={openCloseModal} >\n          {\n              creator != null && <div>\n            \n            <div className=\"d-flex align-items-center\" style={{padding:'1rem'}}>\n              <div className='container mt-4 review-modal'>\n                <div className='row'>\n                  <div className='col'>\n                    <h5 style={{ fontWeight: 'bold', marginBottom: '1rem' }} >Rate Your Experience with the seller</h5>\n                  </div>\n                </div>\n\n                <div className='row'>\n                  <div className='col-3 col-sm-3 col-md-3'>\n                    <img style={{ borderRadius: '50%' }} className=\"media-object pic \" src={profilePic(creator.avatar)} alt=\"...\" />\n                  </div>\n                  <div className='col-6 col-sm-8 col-md-4'>\n                    <p className='para-text'>{creator.name}</p>\n                  </div>\n                </div>\n\n                <div className='row'>\n                  <div className=\"rate\">\n                    <input type=\"radio\" id=\"star5\" name=\"rate\" value=\"5\" onClick={() => {setRating(5)}} />\n                    <label for=\"star5\" title=\"text\"></label>\n                    <input type=\"radio\" id=\"star4\" name=\"rate\" value=\"4\" onClick={() => {setRating(4)}} />\n                    <label for=\"star4\" title=\"text\"></label>\n                    <input type=\"radio\" id=\"star3\" name=\"rate\" value=\"3\" onClick={() => {setRating(3)}} />\n                    <label for=\"star3\" title=\"text\"></label>\n                    <input type=\"radio\" id=\"star2\" name=\"rate\" value=\"2\" onClick={() => {setRating(2)}} />\n                    <label for=\"star2\" title=\"text\"></label>\n                    <input type=\"radio\" id=\"star1\" name=\"rate\" value=\"1\" onClick={() => {setRating(1)}} />\n                    <label for=\"star1\" title=\"text\"></label>\n                  </div>\n                  <textarea\n                    className=\"form-control pull-left p-1 review-text-area\"\n                    placeholder=\"Your review will help others\"\n                    rows=\"3\"\n                    name=\"text\"\n                    value={text}\n                    onChange={handleChange}\n                  ></textarea>\n                </div>\n              </div>\n            </div>\n            <div className=\"modal-footer\" style={{ borderTop: 'none' }}>\n              <button type=\"button\" className=\"review-btn\" onClick={review}> Submit </button>\n            </div>\n          </div>\n          }\n        </Modal>\n          </div>\n          {showSend &&\n              <div className=\"chat-send\">\n                <TextField placeholder=\"Send details and reference documents\"\n                  variant=\"outlined\"  fullWidth className=\"send-input\" value={msg} onChange={(e) => {setMessage(e.target.value)}} />\n                 \n                <div className=\"send-attach\">\n                 \n                  <div className=\"attach-file\" onClick={() => {document.getElementById(\"attachment\").click()}}>\n                    <AttachFileIcon  />\n                    <input type=\"file\" name=\"attachment\" id=\"attachment\" style={{display:\"none\"}} onChange={handleAttachment} />\n                    <span>PNG, Jpeg, SVG, PDF, Ai, XD, EPS, PSD</span>\n                    \n                  </div>\n                  {\n                    attachment != null && <div className=\"d-flex align-items-center\"> <a href={attachmentUrl} target=\"_blank\">{attachment.name}</a> <i className=\"fa fa-times pl-2\" onClick={removeAttachment}></i> </div>\n                  }\n                  <div className=\"send-btn\">\n                  <Button variant=\"contained\" style={{ backgroundColor: \"#5931ea\"}} onClick={sendMsg}>Send</Button>\n                  </div>\n                </div>\n              </div>\n            }\n        </Paper>\n  );\n          }\n}\n"],"sourceRoot":""}