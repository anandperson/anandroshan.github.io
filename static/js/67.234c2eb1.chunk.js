(this["webpackJsonpreact-redux-realworld-example-app"]=this["webpackJsonpreact-redux-realworld-example-app"]||[]).push([[67],{1192:function(e,t,a){},1264:function(e,t,a){"use strict";a.r(t);var n=a(29),i=a(30),s=a(32),c=a(31),r=a(0),l=a.n(r),o=a(988),m=(a(994),a(15)),d=a(11),u=a(33),g=a(66),p=a(64),h=a(24),b=a(45);a(1192);var f=function(e){Object(s.a)(a,e);var t=Object(c.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).init=function(){i.getData(),null!=i.props.currentUser&&i.getGigs()},i.getData=function(){try{Object(b.m)({id:i.props.match.params.id,userid:null==i.props.currentUser?0:i.props.currentUser._id}).then((function(e){i.setState({loading:!1,post:e.post,bidded:e.bidded},(function(){i.getBids(e.post._id),null!=i.props.currentUser&&e.post.userid==i.props.currentUser._id&&i.setState({author:!0})}))}),(function(e){i.setState({loading:!1})}))}catch(e){i.setState({loading:!1})}},i.getGigs=function(){try{Object(b.x)({limit:100,page:1}).then((function(e){i.setState({gigs:e.post})}),(function(e){}))}catch(e){}},i.getBids=function(e){try{Object(b.j)({id:e,limit:100,page:1}).then((function(e){i.setState({bids:e})}),(function(e){}))}catch(t){}},i.bid=function(){if(""==i.state.gig)Object(m.a)(!0,"You need to select a gig");else{Object(m.b)(!0,"Please wait...");try{Object(b.c)({id:i.props.match.params.id,gig:i.state.gig,msg:i.state.msg}).then((function(e){Object(m.b)(),i.setState({modal:!1}),i.init()}),(function(e){Object(m.b)(),Object(m.a)(!0,e.data.message)}))}catch(e){Object(m.b)(),Object(m.a)(!0,"Error occured, try again")}}},i.remove=function(e){Object(m.b)(!0,"Please wait...");try{Object(b.B)({id:e}).then((function(e){Object(m.b)(),i.init()}),(function(e){Object(m.b)(),Object(m.a)(!0,e.data.message)}))}catch(t){Object(m.b)(),Object(m.a)(!0,"Error occured, try again")}},i.delete=function(){Object(m.b)(!0,"Please wait...");try{Object(b.D)({id:i.props.match.params.id}).then((function(e){Object(m.b)(),window.location.href="/passionomy/dashboard/requests"}),(function(e){Object(m.b)(),Object(m.a)(!0,e.data.message)}))}catch(e){Object(m.b)(),Object(m.a)(!0,"Error occured, try again")}},i.state={id:null,loading:!0,modal:!1,author:!1,bidded:0,post:null,gig:"",msg:"",bids:[],gigs:[]},i}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.setState({id:this.props.match.params.id},this.init())}},{key:"render",value:function(){var e,t,a=this,n=this.state.modal;return l.a.createElement("div",{className:"ViewGigRequest"},l.a.createElement(g.a,{displayModal:n,closeModal:function(e){a.setState({modal:!n})}},l.a.createElement("h3",null,"Choose one of your gigs"),this.state.gigs.length>0?l.a.createElement("div",{className:"mt-2"},l.a.createElement("select",{className:"form-control",onChange:function(e){a.setState({gig:e.target.value})},value:this.state.gig},l.a.createElement("option",{value:""},"Select"),this.state.gigs.map((function(e,t){return l.a.createElement("option",{key:t,value:e._id},e.subject," - ",e.preferedCurrency," ",e.standardPrice)}))),l.a.createElement("textarea",{className:"mt-2 form-control",placeholder:"Message (optional)",onChange:function(e){a.setState({msg:e.target.value})}})):l.a.createElement("div",{className:"mt-2 d-flex align-items-center justify-content-center"},l.a.createElement("p",null,"You don't have any gig, please ",l.a.createElement(d.a,{href:"/passionomy/gigs/add",className:"text-primary"},"create")," one and come back to this page")),l.a.createElement("div",{className:"d-flex align-items-center justify-content-center mt-4"},this.state.gigs.length>0&&l.a.createElement(u.a,{color:"primary",size:"big",variant:"contained",onClick:function(){return a.bid()}},"BID")," \xa0 ",l.a.createElement(u.a,{onClick:function(e){a.setState({modal:!n})},size:"big",variant:"primary-outline"},"Cancel"))),l.a.createElement("div",{className:"container my-wall-container "},l.a.createElement("div",{className:"row mt-2"},l.a.createElement("div",{className:"col-sm empty-container-with-out-border left-column"}),l.a.createElement("div",{className:"col-sm empty-container-with-out-border center-column"},this.state.loading?l.a.createElement(p.a,null):null==this.state.post?l.a.createElement("p",{className:"no-found"},"No Data Found"):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"empty-inner-container-with-border p-3"},l.a.createElement(o.Carousel,{showStatus:!1,showIndicators:!1},this.state.post.contents.map((function(e,t){return l.a.createElement("div",{key:t},l.a.createElement("img",{src:e.content_url}))})))),l.a.createElement("div",{className:"mt-3 empty-inner-container-with-border p-3 d-flex align-items-center justify-content-between"},l.a.createElement("div",null,l.a.createElement("h3",null,this.state.post.subject),l.a.createElement("div",null,"Expected Budget: ",l.a.createElement("strong",null,null!==(e=this.state.post.preferedCurrency)&&void 0!==e?e:"USD"," ",this.state.post.budget)),l.a.createElement("div",{className:"mt-2"},"Accepted Gigs:  ",l.a.createElement("strong",null,null!==(t=this.state.post.acceptedGig)&&void 0!==t?t:0," / ",0==this.state.post.maxGigs?"Infinity":this.state.post.maxGigs))),l.a.createElement("div",{className:"text-right"},this.state.author?l.a.createElement(u.a,{onClick:this.delete,size:"big",variant:"danger"},"Delete"):0==this.state.bidded&&(0==this.state.post.maxGigs||this.state.post.acceptedGig<this.state.post.maxGigs)&&l.a.createElement(u.a,{onClick:function(e){null==a.props.currentUser?window.location.href="/login?next=/passionomy/request/"+a.state.post.slug:a.setState({modal:!n})},size:"big"},"BID"))),l.a.createElement("div",{className:"mt-3 empty-inner-container-with-border p-3 d-flex align-items-center justify-content-between"},l.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.post.text}})),l.a.createElement("div",{className:"mt-3 empty-inner-container-with-border p-3"},l.a.createElement("h3",null,"Bids (",this.state.bids.length,")"),l.a.createElement("div",{className:"mt-3"},this.state.bids.length>0&&this.state.bids.map((function(e,t){return l.a.createElement("div",{className:"bid-row",key:t},l.a.createElement("div",{className:"bid-thumb pointer",onClick:function(){window.location.href="/passionomy/gig/"+e.giginfo.slug+"?request="+a.state.id}},l.a.createElement("img",{src:Object(h.c)(void 0!=e.contents[0]?e.contents[0].content_url:"")})),l.a.createElement("div",{className:"bid-desc"},l.a.createElement("div",null,l.a.createElement("h3",{className:"title pointer",onClick:function(){window.location.href="/passionomy/gig/"+e.giginfo.slug+"?request="+a.state.id}},e.giginfo.subject),l.a.createElement("p",null,e.message)),l.a.createElement("div",{className:"text-center"},l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("label",null,"Starts at")),l.a.createElement("div",{className:"price"},e.giginfo.preferedCurrency," ",e.giginfo.standardPrice)),1==e.status?l.a.createElement("p",{className:"text-success"},"Accepted"):a.state.author?l.a.createElement(u.a,{onClick:function(){window.location.href="/passionomy/gig/"+e.giginfo.slug+"?request="+a.state.id}},"Accept"):l.a.createElement(u.a,{onClick:function(){return a.remove(e._id)}},"Remove"))))})))))),l.a.createElement("div",{className:"col-sm empty-container-with-out-border right-column"}))))}}]),a}(l.a.Component);t.default=f}}]);
//# sourceMappingURL=67.234c2eb1.chunk.js.map