(this["webpackJsonpreact-redux-realworld-example-app"]=this["webpackJsonpreact-redux-realworld-example-app"]||[]).push([[36],{1243:function(e,t,n){"use strict";n.r(t);var a=n(7),c=n.n(a),r=n(13),o=n(53),i=n(29),s=n(30),l=n(32),u=n(31),m=n(870),p=n.n(m),d=n(0),f=n.n(d),g=(n(975),n(871)),h=n(872),b=n.n(h),v=n(15),E=n(33),y=n(848),j=n(784),w=n(35),O=n(833);n(841);var N=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;Object(i.a)(this,n),(a=t.call(this,e)).tagChange=function(e){console.log(e)},a.setStateFunc=function(e,t){a.setState(Object(o.a)({},e,t))},a.getBlog=function(){Object(j.l)({postid:a.props.match.params.id,userid:a.props.currentUser&&a.props.currentUser._id?a.props.currentUser._id:0}).then(function(){var e=Object(r.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.post[0],console.log(n),a.setState({title:n.subject,post:n,data:JSON.parse(n.editorContent),text:n.text,amount:n.price,tags:void 0==n.hashtags||void 0==n.hashtags[0]||""==n.hashtags[0]?[]:n.hashtags,currency:n.preferedCurrency,category:n.category,paymentType:n.paidPost?"paid":"free",edit_image:n.contents[0].content_url,loading:!1},(function(){n.paidPost&&document.getElementById("paid").click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){a.setState({loading:!1})}))},a.onEditorStateChange=function(e){a.setState({editorState:e})},a.handleInput=function(e){var t=e.target.value,n=e.target.name;console.log(n+":"+t),a.setState(Object(o.a)({},n,t))},a.handleRemove=function(e){var t=e.target.getAttribute("name");a.setState(Object(o.a)({},t,null))},a.handleFile=function(e,t,n){console.log(n),a.setState(Object(o.a)({},e,n),(function(){var t=new FileReader;t.onload=function(t){document.getElementById(e+"_preview").src=t.target.result},t.readAsDataURL(n)}))},a.handleCheckbox=function(e){var t=e.target.name;if(console.log(t),e.target.checked){var n=e.target.value;console.log(n),a.setState(Object(o.a)({},t,n))}else{n=e.target.getAttribute("uncheckedValue");console.log(n),a.setState(Object(o.a)({},t,n))}},a.dataChange=function(e){console.log(e)},a.submit=function(){var e=Object(r.a)(c.a.mark((function e(t){var n,o,i,s,l,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,a.editor.save();case 3:n=e.sent,o=[],""==a.state.title&&o.push("Title is required"),n.blocks.length<=0&&o.push("Content is required"),null==a.state.post_image&&null==a.state.edit_image&&o.push("Main Image is required"),o.length>0?Object(v.a)(!0,o.join(", ")):(i=(i=a.state.edjsParser.parse(n)).join(" "),s=a.state.post_image,l=a.state.tags.length>0?a.state.tags.join(","):"",(u=new FormData).append("id",a.state.post._id),u.append("postImgs",s),u.append("text",i),u.append("editorContent",JSON.stringify(n)),u.append("subject",a.state.title),u.append("hashtags",l),u.append("paymentType",a.state.paymentType),u.append("amount",a.state.amount),u.append("currency",a.state.currency),u.append("category",a.state.category),Object(v.b)("Your post is being updated..."),Object(j.t)(u).then(function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.location.href="/blogs",Object(v.b)();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){Object(v.b)()})));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.uploadImageCallBack=function(e){return new Promise((function(t,n){Object(w.K)({file:e}).then((function(e){var n={data:{link:e.file.filePath}};console.log(n),t(n)}),(function(e){n(e)}))}))},a.review=function(){};var s=p()();return a.state={post:null,loading:!0,data:"",title:"",edjsParser:s,refreshing:!1,filter:"",latestpost:{},paymentType:"free",post_image:null,edit_image:null,currentTab:0,tags:"",amount:0,category:"General",suggestions:[{id:3,name:"Bananas"},{id:4,name:"Mangos"},{id:5,name:"Lemons"},{id:6,name:"Apricots"}]},a.editor=f.a.createRef(),a.reactTags=f.a.createRef(),a}return Object(s.a)(n,[{key:"onDelete",value:function(e){var t=this.state.tags.slice(0);t.splice(e,1),this.setState({tags:t})}},{key:"onAddition",value:function(e){var t=[].concat(this.state.tags,e);this.setState({tags:t})}},{key:"componentDidMount",value:function(){this.getBlog()}},{key:"render",value:function(){var e=this;return this.state.loading?f.a.createElement("div",null):f.a.createElement("div",{className:"addBlogPage"},f.a.createElement("div",{className:"container my-wall-container "},f.a.createElement("div",{className:"row mt-2"},f.a.createElement("div",{className:"col-sm empty-container-with-border center-column big mx-auto p-4"},f.a.createElement("h1",{className:"text-center"},"Edit Article"),f.a.createElement("form",{onSubmit:function(t){return e.submit(t)},method:"post"},f.a.createElement("div",{className:"form-group"},f.a.createElement("strong",null,"Title of the Article"),f.a.createElement("input",{type:"text",placeholder:"Alpha numeric",name:"title",value:this.state.title,className:"form-control",onChange:this.handleInput})),f.a.createElement("div",{className:"form-group"},f.a.createElement("strong",null,"Content"),f.a.createElement(g.a,{instanceRef:function(t){e.editor=t},data:this.state.data,tools:O.a})),f.a.createElement("div",{className:"form-group"},f.a.createElement("div",{className:"form-check"},f.a.createElement("input",{className:"form-check-input",type:"checkbox",name:"paymentType",value:"paid",id:"paid",uncheckedValue:"free",onChange:this.handleCheckbox}),f.a.createElement("label",{className:"form-check-label",for:"defaultCheck1"},"Make this article paid"))),"paid"==this.state.paymentType&&f.a.createElement("div",{className:"row"},f.a.createElement("div",{className:"col-md-6"},f.a.createElement("div",{className:"form-group"},f.a.createElement("strong",null,"Price"),f.a.createElement("input",{type:"text",placeholder:"Amount",name:"amount",className:"form-control",value:this.state.amount,onChange:this.handleInput}),f.a.createElement("small",{className:"text-secondary"},"Enter how much you want to charge for your content"))),f.a.createElement("div",{className:"col-md-6"},f.a.createElement("div",{className:"form-group"},f.a.createElement("strong",null,"Currency"),f.a.createElement("select",{type:"text",placeholder:"Amount",className:"form-control",id:"currency",name:"currency",value:this.state.currency,onChange:this.handleInput},f.a.createElement("option",{vlaue:""},"Choose"),f.a.createElement("option",null,"USD"),f.a.createElement("option",null,"BTC"),f.a.createElement("option",null,"ETH"),f.a.createElement("option",null,"LTC"),f.a.createElement("option",null,"XRP"),f.a.createElement("option",null,"BCH"),f.a.createElement("option",null,"USDT")),f.a.createElement("small",{className:"text-secondary"},"Enter how much you want to charge for your content")))),f.a.createElement("div",{className:"row"},f.a.createElement("div",{className:"col-md-6"},f.a.createElement("div",{className:"form-group"},f.a.createElement("strong",null,"Main Image"),f.a.createElement(y.a,{name:"post_image",page:"blogs",fileChange:this.handleFile,value:this.state.post_image,accept:"image/*"}),f.a.createElement("small",{className:"text-secondary"},"Replace the main image for your article"),null==this.state.post_image&&null!=this.state.edit_image&&f.a.createElement("div",{className:"uploadedImage"},f.a.createElement("img",{src:this.state.edit_image,id:"post_image_preview"})),null!=this.state.post_image&&f.a.createElement("div",{className:"uploadedImage"},f.a.createElement("img",{src:this.state.post_image.tmp_name,id:"post_image_preview"}),f.a.createElement("div",{className:"fa fa-times remove",name:"post_image",onClick:this.handleRemove})))),f.a.createElement("div",{className:"col-md-6"},f.a.createElement("div",{className:"form-group"},f.a.createElement("strong",null,"Category"),f.a.createElement("select",{type:"text",name:"category",className:"form-control",value:this.state.category,onChange:this.handleInput},f.a.createElement("option",{value:"General"},"General"),f.a.createElement("option",{value:"Technology"},"Technology"),f.a.createElement("option",{value:"Politics"},"Politics")),f.a.createElement("small",{className:"text-secondary"},"Select one related")))),f.a.createElement("div",{className:"form-group"},f.a.createElement("strong",null,"Tags"),f.a.createElement(b.a,{onItemAdded:function(t,n){return e.setState({tags:n})},onItemDeleted:function(t,n){return e.setState({tags:n})},label:"",values:this.state.tags,name:"item-input",placeholder:"Do not include #"}),f.a.createElement("small",{className:"text-secondary"},"Separate tags using commas")),f.a.createElement("div",{className:"form-group"},f.a.createElement(E.a,{variant:"primary",size:"big"},"Update")))))))}}]),n}(f.a.Component);t.default=N},784:function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"t",(function(){return i})),n.d(t,"k",(function(){return s})),n.d(t,"i",(function(){return l})),n.d(t,"p",(function(){return u})),n.d(t,"l",(function(){return m})),n.d(t,"j",(function(){return p})),n.d(t,"h",(function(){return d})),n.d(t,"d",(function(){return f})),n.d(t,"b",(function(){return g})),n.d(t,"s",(function(){return h})),n.d(t,"q",(function(){return b})),n.d(t,"a",(function(){return v})),n.d(t,"n",(function(){return E})),n.d(t,"o",(function(){return y})),n.d(t,"m",(function(){return j})),n.d(t,"r",(function(){return w})),n.d(t,"f",(function(){return O})),n.d(t,"g",(function(){return N}));var a=n(2),c=n(4),r=function(e){return new Promise((function(t,n){Object(c.a)("".concat(a.a.baseUrl,"get-blog-categories"),!0,e).then((function(e){t(e.data)})).catch((function(e){n(e.response)}))}))},o=function(e){return new Promise((function(t,n){Object(c.c)(a.a.baseUrl+"create-blog-post",!0,e).then((function(e){t(e.data)})).catch((function(e){n(e.response)}))}))},i=function(e){return new Promise((function(t,n){Object(c.c)(a.a.baseUrl+"update-blog-post",!0,e).then((function(e){t(e.data)})).catch((function(e){n(e.response)}))}))},s=function(e,t){return new Promise((function(n,r){Object(c.a)(a.a.baseUrl+"get-blog-posts",t,e).then((function(e){n(e.data)})).catch((function(e){r(e.response)}))}))},l=function(e){return new Promise((function(t,n){Object(c.a)(a.a.baseUrl+"get-filtered-blog-posts",!0,e).then((function(e){t(e.data)})).catch((function(e){n(e.response)}))}))},u=function(e){return new Promise((function(t,n){Object(c.c)(a.a.baseUrl+"remove-blog-post",!0,e).then((function(e){t(e.data)})).catch((function(e){n(e.response)}))}))},m=function(e){return new Promise((function(t,n){Object(c.a)(a.a.baseUrl+"get-blog",!1,e).then((function(e){t(e.data)})).catch((function(e){n(e.response)}))}))},p=function(e){return new Promise((function(t,n){Object(c.a)(a.a.baseUrl+"get-popular-blogs",!0,e).then((function(e){t(e.data)})).catch((function(e){n(e.response)}))}))},d=function(e){return new Promise((function(t,n){Object(c.a)(a.a.baseUrl+"get-category-blogs",!0,e).then((function(e){t(e.data)})).catch((function(e){n(e.response)}))}))},f=function(e){return new Promise((function(t,n){Object(c.a)(a.a.baseUrl+"get-author-blogs",!0,e).then((function(e){t(e.data)})).catch((function(e){n(e.response)}))}))},g=function(e){return new Promise((function(t,n){Object(c.c)(a.a.baseUrl+"blog-clap",!0,e).then((function(e){t(e.data)})).catch((function(e){n(e.response)}))}))},h=function(e){return new Promise((function(t,n){Object(c.c)(a.a.baseUrl+"send-tips",!0,e).then((function(e){t(e.data)})).catch((function(e){n(e.response)}))}))},b=function(e){return new Promise((function(t,n){Object(c.c)(a.a.baseUrl+"purchase-blog",!0,e).then((function(e){t(e.data)})).catch((function(e){n(e.response)}))}))},v=function(e){return new Promise((function(t,n){Object(c.a)(a.a.baseUrl+"check-purchased-blog",!0,e).then((function(e){t(e.data)})).catch((function(e){n(e.response)}))}))},E=function(e,t){return new Promise((function(n,r){Object(c.c)(a.a.baseUrl+"like-blog",t,e).then((function(e){n(e.data)})).catch((function(e){r(e.response)}))}))},y=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new Promise((function(n,r){Object(c.c)(a.a.baseUrl+"comment-blog",t,e).then((function(e){n(e.data)})).catch((function(e){r(e.response)}))}))},j=function(e,t){return new Promise((function(n,r){Object(c.c)(a.a.baseUrl+"like-comment-blog",t,e).then((function(e){n(e.data)})).catch((function(e){r(e.response)}))}))},w=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new Promise((function(n,r){Object(c.c)(a.a.baseUrl+"reply-comment-blog",t,e).then((function(e){n(e.data)})).catch((function(e){r(e.response)}))}))},O=function(e){return new Promise((function(t,n){Object(c.a)(a.a.baseUrl+"get-blog-draft",!0,e).then((function(e){t(e.data)})).catch((function(e){n(e.response)}))}))},N=function(e){return new Promise((function(t,n){Object(c.a)(a.a.baseUrl+"blog-stats",!0,e).then((function(e){t(e.data)})).catch((function(e){n(e.response)}))}))}},833:function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));var a=n(908),c=n.n(a),r=n(909),o=n.n(r),i=n(910),s=n.n(i),l=n(911),u=n.n(l),m=n(912),p=n.n(m),d=(n(913),n(914)),f=n.n(d),g=n(915),h=n.n(g),b=n(916),v=n.n(b),E=n(917),y=n.n(E),j=n(918),w=n.n(j),O=n(919),N=n.n(O),k=n(920),P=n.n(k),C=n(921),U=n.n(C),x=n(922),S=n.n(x),_=n(2),I={embed:c.a,table:o.a,marker:w.a,list:s.a,warning:u.a,code:p.a,image:{class:f.a,config:{endpoints:{byFile:_.a.baseUrl+"editor-upload",byUrl:_.a.baseUrl+"fetchUrl"}}},raw:h.a,header:v.a,quote:y.a,checklist:N.a,delimiter:P.a,inlineCode:U.a,simpleImage:S.a}},841:function(e,t,n){},848:function(e,t,n){"use strict";var a=n(7),c=n.n(a),r=n(13),o=n(14),i=n(0),s=n.n(i),l=n(64),u=n(35),m=n(15);n(849);t.a=function(e){var t=Object(i.useState)(""),n=Object(o.a)(t,2),a=n[0],p=n[1],d=Object(i.useState)("valid"),f=Object(o.a)(d,2),g=f[0],h=f[1],b=Object(i.useState)(!1),v=Object(o.a)(b,2),E=v[0],y=v[1];Object(i.useEffect)((function(){var t=e.accept;if(void 0!=t&&null!=t&&""!=t&&"*"!=t){var n="valid ";t.split(",").forEach((function(e){"image/*"==e.trim()?n+="image":n+=", pdf"})),h(n)}}),[]);var j=function(e){var t=e.target.getAttribute("data-target");document.getElementById(t).click()};return s.a.createElement("div",{className:"fileBrowse"},s.a.createElement("div",{className:"d-flex justify-content-start align-items"},s.a.createElement("input",{className:"form-control",value:"upload"==e.type?a:void 0!=e.value?e.value.name:"",type:"text",placeholder:"jpg, png, jpeg, pdf files only","data-target":e.name,onClick:function(e){return j(e)}}),s.a.createElement("input",{type:"file",name:"file",className:"hide",id:e.name,onChange:function(t){return function(t){var n=t.target.files[0],a=e.accept,o=n.type;console.log(o);var i=o.split("/")[0];"application"==i&&(i=o,o.split("/")[1]),void 0==a||null==a||""==a||"*"==a||-1!=a.indexOf(i)?(p(n.name),"upload"==e.type?(y(!0),Object(u.K)({page:null==e.page?"general":e.page,file:n}).then(function(){var t=Object(r.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.fileChange(e.name,e.type,n.file.filePath),console.log(n),y(!1);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(e){y(!1),Object(m.a)(!0,e.message)}))):e.fileChange(e.name,e.type,n)):Object(m.a)(!0,"Please choose "+g+" files only")}(t)},accept:void 0!=e.accept&&null!=e.accept?e.accept:"*"}),s.a.createElement("button",{className:"btn btn-main box","data-target":e.name,type:"button",onClick:function(e){return j(e)}},E?s.a.createElement(l.a,null):"Browse")))}},849:function(e,t,n){}}]);
//# sourceMappingURL=36.0141183f.chunk.js.map