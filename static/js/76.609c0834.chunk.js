(this["webpackJsonpreact-redux-realworld-example-app"]=this["webpackJsonpreact-redux-realworld-example-app"]||[]).push([[76],{1286:function(t,e,a){"use strict";a.r(e);var n=a(53),c=a(7),o=a.n(c),s=a(13),l=a(29),r=a(30),i=a(32),u=a(31),d=a(0),m=a.n(d),p=a(15),b=a(231),f=a(232),h=a(64),g=a(479),w=a(233),v=a(2),E=a(197),N=a(35),k=a(65),x=(a(66),a(485),a(33),a(26)),j=function(t){return t.navigationBlocked?window.onbeforeunload=function(){return!0}:window.onbeforeunload=null,m.a.createElement(x.a,{when:t.navigationBlocked,message:"Are you sure you want to leave?"})},C=function(t){Object(i.a)(a,t);var e=Object(u.a)(a);function a(t){var c;return Object(l.a)(this,a),(c=e.call(this,t)).componentDidMount=function(){c.checkWallet()},c.componentWillUnmount=function(){window.onbeforeunload=null,c.setState({open:!1})},c.closeModal=function(){c.setState({open:!1})},c.leave=function(){c.setState({open:!1,doc1:null,doc2:null,doc3:null,doc4:null})},c.checkWallet=function(){Object(E.a)().then((function(t){"Accept"==t.data.status?c.setState({loading:!1,status:t.data.status,doc1:void 0==t.data.idprooffront||""==t.data.idprooffront?null:t.data.idprooffront,doc2:void 0==t.data.idproofback||""==t.data.idproofback?null:t.data.idproofback,doc3:void 0==t.data.idproofdoc||""==t.data.idproofdoc?null:t.data.idproofdoc,doc4:void 0==t.data.bankproof||""==t.data.bankproof?null:t.data.bankproof},(function(){window.localStorage.setItem("kycStatus",t.data.status),window.localStorage.setItem("doc1",c.state.doc1),window.localStorage.setItem("doc2",c.state.doc2),window.localStorage.setItem("doc3",c.state.doc3),window.localStorage.setItem("doc4",c.state.doc4)})):c.setState({loading:!1})}),(function(t){c.setState({loading:!1,error:"Authentication Error!"})}))},c.uploadedFiles=function(){Object(N.s)({page:"walletKYC"}).then(function(){var t=Object(s.a)(o.a.mark((function t(e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c.setState({files:e.files});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(t){}))},c.removeFile=function(t){Object(p.b)(!0,"File is being removed, please wait..."),Object(N.D)(t).then(function(){var t=Object(s.a)(o.a.mark((function t(e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c.uploadedFiles(),Object(p.b)();case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(t){Object(p.a)(!0,t.message),Object(p.b)()}))},c.changeTab=function(t){c.setState({open:!1,currentTab:t})},c.browse=function(t){var e=t.target.getAttribute("data-target");console.log(e),document.getElementById(e).click()},c.chooseFile=function(t){},c.viewDocument=function(t){var e=c.state[t];e instanceof File?window.open(URL.createObjectURL(e)):window.open(v.a.walletDocUrl+e)},c.clearFile=function(t){var e=t.target.getAttribute("data-target");c.setState(Object(n.a)({},e,null),(function(){null==c.state.doc1&&null==c.state.doc2&&null==c.state.doc3&&null==c.state.doc4||""!=c.state.status?c.setState({open:!1}):c.setState({open:!0})}))},c.inputChange=function(t){var e=t.target,a=e.getAttribute("id");console.log(e.files[0]);var o=e.files[0];o.type.includes("image/")||"application/pdf"==o.type?o.size>1048576?Object(p.a)(!0,"File size should be lesser than or equal to 1 MB"):c.setState(Object(n.a)({},a,e.files[0]),(function(){null==c.state.doc1&&null==c.state.doc2&&null==c.state.doc3&&null==c.state.doc4||""!=c.state.status?c.setState({open:!1}):c.setState({open:!0})})):Object(p.a)(!0,"PDF/Image files only allowed")},c.blobify=function(t,e){return new Promise((function(a,n){if(t){var c=new XMLHttpRequest;c.open("GET",e,!0),c.responseType="blob",c.onload=function(){a(c.response)},c.send()}else a("")}))},c.submit=Object(s.a)(o.a.mark((function t(){var e;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Object(p.b)(!0,"Submitting, please wait..."),null==c.state.doc1||null==c.state.doc2||null==c.state.doc3||null==c.state.doc4?(Object(p.b)(),Object(p.a)(!0,"Please select files for all categories!")):(e={Front:c.state.doc1,Back:c.state.doc2,Doc:c.state.doc3,Bank:c.state.doc4},Object(k.B)(e).then(function(){var t=Object(s.a)(o.a.mark((function t(e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:0==e.status&&Object(p.a)(!0,e.message),Object(p.b)(),c.setState({status:"Pending"},c.changeTab(0));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(t){Object(p.b)(),Object(p.a)(!0,void 0==t?"Someting went wrong":t.message)})));case 2:case"end":return t.stop()}}),t)}))),c.state={open:!1,attempt:0,doc1:null,doc2:null,doc3:null,doc4:null,loading:!0,status:"",content:"loading",currentTab:0,file:"",selected:[],files:[]},c}return Object(r.a)(a,[{key:"render",value:function(){var t=this;return m.a.createElement("div",{className:"container my-wall-container depositPage"},this.state.open&&m.a.createElement(j,{navigationBlocked:this.state.open}),m.a.createElement("div",{className:"row mt-2"},m.a.createElement("div",{className:"col-sm empty-container-with-out-border left-column"},m.a.createElement(b.a,this.props)),m.a.createElement("div",{className:"col-sm empty-container-with-border center-column"},m.a.createElement(f.a,this.props),m.a.createElement(g.a,{tabs:["Verification Status","Manage Documents"],type:"transactions",className:"noBorder",currentTab:this.state.currentTab,preventChange:this.state.open,changeTab:this.changeTab}),0==this.state.currentTab?m.a.createElement("div",{className:"tab row m--1 mt-2"},m.a.createElement("div",{className:"bordered p-4 w-100"},this.state.loading?m.a.createElement(h.a,null):""==this.state.status?m.a.createElement("p",{className:"text-center text-danger col-md-6 mx-auto p-3"},'Your account hasn\'t been verified yet, please go to "Manage Documents" tab and upload your documents and wait for approval!'):"Pending"==this.state.status?m.a.createElement("p",{className:"text-center text-warning col-md-6 mx-auto p-3"},"Your have already submitted your documents, please wait for approval"):"Reject"==this.state.status?m.a.createElement("p",{className:"text-center text-danger col-md-6 mx-auto p-3"},"You account verification has been rejected, please resubmit it again!"):m.a.createElement("p",{className:"text-center text-success col-md-6 mx-auto p-3"},"You account has been verified, now you can use all wallet features!"))):m.a.createElement("div",{className:"tab mt-3 p-2 bordered"},m.a.createElement("div",{className:"cards"},m.a.createElement("div",{className:"w50 card"+(null!=this.state.doc1?" bg-main":" bg-light")},m.a.createElement("h4",null,"RG, CNH or Passport - Front"),null!=this.state.doc1&&m.a.createElement("a",{className:"text-dark","data-target":"doc1",onClick:function(e){return t.viewDocument("doc1")},target:"_BLANK"},m.a.createElement("span",{className:"fa fa-download"})," ",m.a.createElement("span",{className:"text-main"},"View Document")),null==this.state.doc1?m.a.createElement("button",{className:"btn btn-main box cardAction","data-target":"doc1",onClick:function(e){return t.browse(e)}},"Choose"):""==this.state.status||"Reject"==this.state.status?m.a.createElement("button",{className:"btn btn-main box cardAction","data-target":"doc1",onClick:function(e){return t.clearFile(e)}},"Clear"):null,m.a.createElement("input",{type:"file",name:"doc1",className:"hide",id:"doc1",onChange:function(e){return t.inputChange(e)},accept:"image/*, application/pdf"})),m.a.createElement("div",{className:"w50 card"+(null!=this.state.doc2?" bg-main":" bg-light")},m.a.createElement("h4",null,"RG, CNH or Passport - Back"),null!=this.state.doc2&&m.a.createElement("a",{className:"text-dark","data-target":"doc2",onClick:function(e){return t.viewDocument("doc2")},target:"_BLANK"},m.a.createElement("span",{className:"fa fa-download"})," ",m.a.createElement("span",{className:"text-main"},"View Document")),null==this.state.doc2?m.a.createElement("button",{className:"btn btn-main box cardAction","data-target":"doc2",onClick:function(e){return t.browse(e)}},"Choose"):""==this.state.status||"Reject"==this.state.status?m.a.createElement("button",{className:"btn btn-main box cardAction","data-target":"doc2",onClick:function(e){return t.clearFile(e)}},"Clear"):null,m.a.createElement("input",{type:"file",name:"doc2",className:"hide",id:"doc2",onChange:function(e){return t.inputChange(e)},accept:"image/*, application/pdf"})),m.a.createElement("div",{className:"w50 card"+(null!=this.state.doc3?" bg-main":" bg-light")},m.a.createElement("h4",null,"Selfie with Document"),null!=this.state.doc3&&m.a.createElement("a",{className:"text-dark","data-target":"doc3",onClick:function(e){return t.viewDocument("doc3")},target:"_BLANK"},m.a.createElement("span",{className:"fa fa-download"})," ",m.a.createElement("span",{className:"text-main"},"View Document")),null==this.state.doc3?m.a.createElement("button",{className:"btn btn-main box cardAction","data-target":"doc3",onClick:function(e){return t.browse(e)}},"Choose"):""==this.state.status||"Reject"==this.state.status?m.a.createElement("button",{className:"btn btn-main box cardAction","data-target":"doc3",onClick:function(e){return t.clearFile(e)}},"Clear"):null,m.a.createElement("input",{type:"file",name:"doc3",className:"hide",id:"doc3",onChange:function(e){return t.inputChange(e)},accept:"image/*, application/pdf"})),m.a.createElement("div",{className:"w50 card"+(null!=this.state.doc4?" bg-main":" bg-light")},m.a.createElement("h4",null,"Proof of financial capability - Bank Statement / Income Tax / Income Proof."),null!=this.state.doc4&&m.a.createElement("a",{className:"text-dark","data-target":"doc4",onClick:function(e){return t.viewDocument("doc4")},target:"_BLANK"},m.a.createElement("span",{className:"fa fa-download"})," ",m.a.createElement("span",{className:"text-main"},"View Document")),null==this.state.doc4?m.a.createElement("button",{className:"btn btn-main box cardAction","data-target":"doc4",onClick:function(e){return t.browse(e)}},"Choose"):""==this.state.status||"Reject"==this.state.status?m.a.createElement("button",{className:"btn btn-main box cardAction","data-target":"doc4",onClick:function(e){return t.clearFile(e)}},"Clear"):null,m.a.createElement("input",{type:"file",name:"doc4",className:"hide",id:"doc4",onChange:function(e){return t.inputChange(e)},accept:"image/*, application/pdf"}))),(null==this.state.status||""==this.state.status||"Reject"==this.state.status)&&m.a.createElement("div",{className:"form-group mt-80 d-flex align-items-center justify-content-center"},m.a.createElement("button",{className:"btn btn-main box big",onClick:this.submit},"Submit for Approval")))),m.a.createElement("div",{className:"col-sm empty-container-with-out-border right-column"},m.a.createElement(w.a,null))))}}]),a}(m.a.Component);e.default=C}}]);
//# sourceMappingURL=76.609c0834.chunk.js.map