{"version":3,"sources":["pages/Wallet/tfa.js"],"names":["TFA","props","componentDidMount","checkWallet","walletCheck","then","resp","setState","loading","getDetails","err","error","handleChange","e","val","target","value","input","getAttribute","getUserDetails","a","tfa","data","tfa_url","status","tfa_status","alertBox","submit","preventDefault","console","log","state","code","switchLoader","updateTFA","message","window","location","reload","undefined","toString","attempt","reset","className","this","src","action","onSubmit","method","type","required","name","placeholder","onChange","variant","size","React","Component"],"mappings":"+TAWMA,G,yDACF,WAAYC,GAAQ,IAAD,8BACf,cAAMA,IAaTC,kBAAoB,WAEjB,EAAKC,eAhBU,EAmBnBA,YAAc,WACVC,cAAcC,MAAK,SAAAC,GACf,EAAKC,SAAS,CACVC,SAAQ,IACT,WACC,EAAKC,mBAEV,SAAAC,GACC,EAAKH,SAAS,CACVC,SAAQ,EACRG,MAAO,8BA7BA,EAkCnBC,aAAe,SAACC,GACZ,IAAIC,EAAMD,EAAEE,OAAOC,MACfC,EAAQJ,EAAEE,OAAOG,aAAa,QAE9B,EAAKX,SAAL,eACKU,EAASH,KAvCH,EA4CnBL,WAAa,WACTU,cAAiBd,KAAjB,uCAAsB,WAAMC,GAAN,SAAAc,EAAA,sDAClB,EAAKb,SAAS,CACVC,SAAQ,EACRa,IAAKf,EAAKgB,KAAKC,QACfC,OAAQlB,EAAKgB,KAAKG,aAJJ,2CAAtB,uDAMG,SAAAf,GACC,EAAKH,SAAS,CACVC,SAAQ,IAEZkB,aAAS,EAAM,0CAvDJ,EA2DnBC,OAAS,SAACd,GAGL,GAFDA,EAAEe,iBACFC,QAAQC,IAAI,EAAKC,OACM,MAAnB,EAAKA,MAAMC,MAAmC,IAAnB,EAAKD,MAAMC,KACtCN,aAAS,EAAM,6BACd,CACDO,YAAa,eACb,IAAIX,EAAO,CACX,SAAY,EAAKS,MAAMC,MAG3BE,YAAUZ,GAAMjB,KAAhB,uCAAqB,WAAMC,GAAN,SAAAc,EAAA,sDACjB,IACsB,GAAfd,EAAKkB,QACJE,aAAS,EAAMpB,EAAK6B,QAAS,WAC7B,EAAK5B,SAAS,CACVyB,KAAM,KAEVI,OAAOC,SAASC,UAEhBZ,aAAS,EAAMpB,EAAK6B,SAE1B,MAAOxB,GACLe,aAAS,OAAgBa,GAAT5B,EAAqB,QAAUA,EAAM6B,YAEzDP,cAdiB,2CAArB,uDAeG,SAAAtB,GACKe,aAAS,OAAgBa,GAAT5B,EAAqB,QAAUA,EAAM6B,YACrDP,mBArFR,EAAKF,MAAQ,CACTU,QAAQ,EACRC,OAAM,EACNrB,IAAI,GACJG,OAAQ,EACRQ,KAAM,GACNxB,SAAQ,GARG,E,qDA8Ff,OACI,yBAAKmC,UAAU,2CACX,yBAAKA,UAAU,YAGX,yBAAKA,UAAU,sDACX,kBAAC,IAAeC,KAAK3C,QAMrB2C,KAAKb,MAAMvB,SAAW,yBAAKmC,UAAU,gEAA+D,kBAAC,IAAD,QAErGC,KAAKb,MAAMvB,SAAW,yBAAKmC,UAAU,gEACxC,kBAAC,IAAqBC,KAAK3C,OAC3B,+EACA,uBAAG0C,UAAU,eAAoC,GAArBC,KAAKb,MAAMP,OAAc,gHAAkH,IACjJ,GAArBoB,KAAKb,MAAMP,QAAe,yBAAKqB,IAAKD,KAAKb,MAAMV,MAChD,wCAAa,0BAAMsB,UAAgC,GAArBC,KAAKb,MAAMP,OAAc,cAAgB,gBAAsC,GAArBoB,KAAKb,MAAMP,OAAc,cAAgB,YACjI,6BACI,0BAAMsB,OAAO,GAAGC,SAAUH,KAAKjB,OAAQqB,OAAO,QAC1C,yBAAKL,UAAU,oBACX,qEAAgE,GAArBC,KAAKb,MAAMP,OAAc,SAAW,UAA/E,QACA,2BAAOyB,KAAK,OAAOC,UAAQ,EAACC,KAAK,OAAOC,YAAY,GAAGpC,MAAO4B,KAAKb,MAAMC,KAAMqB,SAAUT,KAAKhC,gBAElG,yBAAK+B,UAAU,oBACZ,kBAAC,IAAD,CAAQW,QAAQ,UAAUC,KAAK,OAA/B,cAMX,yBAAKZ,UAAU,uDACf,kBAAC,IAAD,a,GAjIFa,IAAMC,YAyITzD","file":"static/js/73.c8069f21.chunk.js","sourcesContent":["import React from 'react';\nimport { alertBox, switchLoader } from '../../commonRedux/';\nimport Button from '../../components/Button';\nimport WalletMenu from '../../components/Menu/WalletMenu';\nimport WalletMenuMobile from '../../components/Menu/WalletMenuMobile';\nimport Spinner from '../../components/Spinner/index';\nimport WalletAllBalance from '../../components/Wallet/allBalance';\nimport walletCheck from '../../hooks/walletCheck';\nimport { getUserDetails, updateTFA } from '../../http/wallet-calls';\nimport './styles.css';\n\nclass TFA extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            attempt:0,\n            reset:false,\n            tfa:'',\n            status: 0,\n            code: '',\n            loading:true,\n        };\n    }\n\n\n\n     componentDidMount = () => {\n    \n        this.checkWallet();\n    };\n\n    checkWallet = () => {\n        walletCheck().then(resp=>{\n            this.setState({\n                loading:false\n            }, () => {\n                this.getDetails();   \n            });\n        }, err => {\n            this.setState({\n                loading:false,\n                error: 'Authentication Error!'\n            })\n        })\n    };\n\n    handleChange = (e) => {\n        var val = e.target.value;\n        var input = e.target.getAttribute(\"name\");\n   \n            this.setState({\n                [input] : val\n            });\n        \n    }\n\n    getDetails = () =>{\n        getUserDetails().then(async resp => {\n            this.setState({\n                loading:false,\n                tfa: resp.data.tfa_url,\n                status: resp.data.tfa_status\n            })\n        }, err => {\n            this.setState({\n                loading:false\n            })\n            alertBox(true, \"Error getting your data, try again\")\n        })\n    }\n\n    submit = (e) => {\n        e.preventDefault();\n        console.log(this.state);\n         if(this.state.code == null || this.state.code == ''){\n            alertBox(true, \"Please enter the code\");\n        }else{\n            switchLoader(\"Updating...\");\n            var data = {\n            \"tfa_code\": this.state.code,\n          };\n\n        updateTFA(data).then(async resp => {\n            try {\n                if(resp.status == true){\n                    alertBox(true, resp.message, \"success\")\n                    this.setState({\n                        code: ''\n                    })\n                    window.location.reload();\n                }else{\n                    alertBox(true, resp.message)\n                }\n            } catch (error) {\n                alertBox(true, (error == undefined ? 'Error' : error.toString()));\n            }\n            switchLoader();\n        }, error => {\n                alertBox(true, (error == undefined ? 'Error' : error.toString()));\n                switchLoader();\n        });\n    }\n    };\n\n    render() {\n\n        return (\n            <div className=\"container my-wall-container depositPage\">\n                <div className=\"row mt-2\">\n\n                    {/* <!-- left column --> */}\n                    <div className=\"col-sm empty-container-with-out-border left-column\">\n                        <WalletMenu {...this.props} />\n                    </div>\n                    {/* <!-- end left column --> */}\n\n                    {/* <!-- center column --> */}\n                    {\n                        this.state.loading && <div className=\"col-sm empty-container-with-border center-column text-center\"><Spinner /></div>\n                    }\n                    { !this.state.loading && <div className=\"col-sm empty-container-with-border center-column text-center\">\n                    <WalletMenuMobile {...this.props} />\n                    <h3>Scan this QR code with google authenticator app</h3>\n                    <p className=\"text-danger\">{this.state.status == 0 ? \"If you have already added this in your google authenticator and disabled 2FA, please remove it and scan again\" : \"\"}</p>\n                    {this.state.status == 0 && <img src={this.state.tfa} />}\n                    <div>Status: <span className={this.state.status == 0 ? \"text-danger\" : \"text-success\"}>{this.state.status == 0 ? \"Not Enabled\" : \"Enabled\"}</span></div>\n                    <div>\n                        <form action=\"\" onSubmit={this.submit} method=\"post\">\n                            <div className=\"input-group mb-3\">\n                                <label>Enter Google Authenticator code to {this.state.status == 0 ? 'Enable' : 'Disable'} 2FA</label>\n                                <input type=\"text\" required name=\"code\" placeholder=\"\" value={this.state.code} onChange={this.handleChange} />\n                            </div>\n                            <div className=\"input-group mb-3\">\n                               <Button variant=\"primary\" size=\"big\">Update</Button>\n                            </div>\n                        </form>\n                    </div>\n                    </div> }\n                    {/* <!-- end center column --> */}\n                    <div className=\"col-sm empty-container-with-out-border right-column\">\n                    <WalletAllBalance /> \n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default TFA;\n"],"sourceRoot":""}