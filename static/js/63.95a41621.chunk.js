(this["webpackJsonpreact-redux-realworld-example-app"]=this["webpackJsonpreact-redux-realworld-example-app"]||[]).push([[63],{1249:function(e,t,a){"use strict";a.r(t);var n=a(53),r=a(7),s=a.n(r),c=a(13),l=a(29),i=a(30),o=a(32),u=a(31),m=a(0),d=a.n(m),h=a(15),f=a(11),p=a(33),E=a(850),b=a(231),w=a(232),v=a(64),y=a(479),g=a(233),N=a(197),C=a(65),S=(a(485),function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(l.a)(this,a),(r=t.call(this,e)).changeTab=function(e){r.setState({currentTab:e})},r.componentDidMount=function(){r.checkWallet()},r.checkWallet=function(){Object(N.a)().then((function(e){r.setState({status:void 0==e.data.status?"":e.data.status},(function(){"Accept"==e.data.status?(r.getDetails(),r.getWithdrawals()):r.setState({loading:!1})}))}),(function(e){r.setState({loading:!1,error:"Authentication Error!"})}))},r.getDetails=function(){Object(C.u)().then(function(){var e=Object(c.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.setState({loading:!1,tfa_status:t.data.tfa_status,with_pass:t.data.withPassword});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){r.setState({loading:!1})}))},r.getAddresses=function(){Object(C.x)({currency:r.state.currentCoin.currencySymbol}).then(function(){var e=Object(c.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:1==t.status?r.setState({addresses:t.data}):r.setState({addresses:[]});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){r.setState({loading:!1})}))},r.inputChange=function(e){var t=e.target.value,a=e.target.getAttribute("name");if("amount"==a){var s=r.state.usd,c=r.state.fee;null!=r.state.currentCoin&&(s=t*r.state.currentCoin.EstimatedUSD,c=t*r.state.currentCoin.withdrawfee/100),r.setState({amount:t,usd:s,fee:c})}else if("intCurrency"==a){var l=e.target.selectedOptions[0].getAttribute("data-usd"),i=r.state.intUsd;""!=r.state.intAmount&&(i=r.state.intAmount*l),r.setState({intCurrency:t,estUsd:l,intUsd:i})}else if("intAmount"==a){var o=t*r.state.estUsd;r.setState({intAmount:t,intUsd:o})}else"check"==t?r.setState(Object(n.a)({},a,!r.state[a])):r.setState(Object(n.a)({},a,t))},r.getWithdrawals=function(){Object(C.w)().then(function(){var e=Object(c.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.setState({withdrawals:t.data,error:""});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){}))},r.selectCurrency=function(e){var t=r.state.usd,a=r.state.fee;null!=e&&""!=r.state.amount&&(t=r.state.amount*e.EstimatedUSD,a=r.state.amount*e.withdrawfee/100),r.setState({currentCoin:e,usd:t,fee:a},(function(){r.getAddresses()}))},r.submit=function(){if(console.log(r.state),r.state.agree)if(null==r.state.currentCoin||""==r.state.to||""==r.state.amount||""==r.state.tfa||""==r.state.withPassword)Object(h.a)(!0,"Please fill all required fields");else{Object(h.b)("Submitting Transfer Request...");var e={withcurrency:r.state.currentCoin._id,toAddress:r.state.to,withPassword:r.state.withPassword,withamount:Number(r.state.amount),withType:r.state.takeFee?1:0,fees:r.state.currentCoin.withdrawfee,receiveamount:r.state.fee,note:r.state.note,tfa:Number(r.state.tfa),url:"https://eclipton.com/wallet/withdraw"};Object(C.H)(e).then(function(){var e=Object(c.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{1==t.status?(r.reset(),Object(h.a)(!0,t.message,"success")):Object(h.a)(!0,t.message)}catch(a){Object(h.a)(!0,void 0==a?"Error":a.toString())}Object(h.b)();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){Object(h.a)(!0,void 0==e?"Error":e.toString()),Object(h.b)()}))}else Object(h.a)(!0,"You need to agree to the terms and conditions in order to continue!")},r.reset=function(){r.setState({reset:!0}),setTimeout((function(){r.setState({reset:!1})}),200)},r.state={attempt:0,addresses:[],loading:!0,reset:!1,tfa_status:null,with_pass:null,to:"",withdrawals:null,amountCurrency:"",amount:"",usdCurrency:"",usd:"",tfa:"",withPassword:"",note:"",fee:0,estUsd:0,agree:!1,takeFee:!0,status:null,currentCoin:null,coins:null,content:"loading",currentTab:0},r}return Object(i.a)(a,[{key:"render",value:function(){return d.a.createElement("div",{className:"container my-wall-container depositPage"},d.a.createElement("div",{className:"row mt-2"},d.a.createElement("div",{className:"col-sm empty-container-with-out-border left-column"},d.a.createElement(b.a,this.props)),this.state.loading&&d.a.createElement("div",{className:"col-sm empty-container-with-border center-column"},d.a.createElement(v.a,null)),"Accept"!=this.state.status&&!this.state.loading&&d.a.createElement("div",{className:"col-sm empty-container-with-border center-column"},d.a.createElement("p",{className:"text-danger text-center mt-4"},"Finish KYC to use this feature"),d.a.createElement("div",{className:"text-center"},d.a.createElement(f.a,{href:"/wallet/verification"},d.a.createElement("button",{className:"btn btn-main"},"Go to Verification")))),!this.state.loading&&"Accept"==this.state.status&&d.a.createElement("div",{className:"col-sm empty-container-with-border center-column"},d.a.createElement(w.a,this.props),d.a.createElement(y.a,{tabs:["Withdraw","Recent Withdraw"],type:"transactions",className:"noBorder",currentTab:this.state.currentTab,changeTab:this.changeTab}),this.state.reset?d.a.createElement(v.a,null):1!=this.state.tfa_status||""==this.state.with_pass?d.a.createElement("div",{className:"d-flex align-items-center justify-content-center flex-column p-4"},d.a.createElement("p",null,"You need to complete the below steps in order to withdraw"),1!=this.state.tfa_status&&d.a.createElement("div",{className:"mt-2"},d.a.createElement(p.a,{variant:"primary",size:"big"},d.a.createElement(f.a,{href:"/wallet/tfa"},"Enable TFA"))),""==this.state.with_pass&&d.a.createElement("div",{className:"mt-4"},d.a.createElement(p.a,{variant:"primary",size:"big"},d.a.createElement(f.a,{href:"/wallet/password"},"Set Withdrawal Password")))):d.a.createElement("div",{className:"tab row m--1 mt-2 "+(0!=this.state.currentTab&&"d-none")},d.a.createElement("div",{className:"col-md-5 p-1"},d.a.createElement("div",{className:"bordered p-3"},d.a.createElement(E.a,{selectCoin:this.selectCurrency}))),d.a.createElement("div",{className:"col-md-7 p-1"},null==this.state.currentCoin?d.a.createElement("p",{className:"p-4 text-center"},"Choose a coin from the list"):d.a.createElement("div",{className:"bordered p-3"},d.a.createElement("div",{className:"form-group"},d.a.createElement("label",null,"To Address"),this.state.addresses.length>0?d.a.createElement("select",{value:this.state.to,className:"form-control",placeholder:"Wallet Address",name:"to",onChange:this.inputChange},d.a.createElement("option",{value:""},"Select"),this.state.addresses.map((function(e,t){return d.a.createElement("option",{value:e.address},e.address)}))):d.a.createElement("div",{className:""},d.a.createElement(p.a,{variant:"primary"},d.a.createElement(f.a,{href:"/wallet/address/"+this.state.currentCoin.currencySymbol},d.a.createElement("i",{className:"fa fa-plus"})," Add Address")))),d.a.createElement("div",{className:"form-group"},d.a.createElement("label",null,"Amount"),d.a.createElement("div",{className:"d-flex justify-content-start align-items"},d.a.createElement("input",{type:"text",className:"form-control currencySelect",name:"amountCurrency",value:null==this.state.currentCoin?"":this.state.currentCoin.currencySymbol,readOnly:!0}),d.a.createElement("input",{className:"form-control",type:"text",placeholder:"Amount",name:"amount",onChange:this.inputChange,value:this.state.amount})),d.a.createElement("div",{className:"mt-2 d-flex justify-content-start align-items"},d.a.createElement("input",Object(n.a)({type:"text",className:"form-control currencySelect",name:"usdCurrency",readOnly:!0,value:"USD"},"readOnly",!0)),d.a.createElement("input",{className:"form-control",type:"text",placeholder:"Amount",name:"usd",onChange:this.inputChange,value:this.state.usd,readOnly:!0})),d.a.createElement("small",null,d.a.createElement("strong",null,"Received Amount: ",this.state.fee.toFixed(8)))),d.a.createElement("div",{className:"form-group"},d.a.createElement("label",null,"TFA "),d.a.createElement("input",{type:"text",className:"form-control",placeholder:"Google Authenticator Code",name:"tfa",onChange:this.inputChange,value:this.state.tfa})),d.a.createElement("div",{className:"form-group"},d.a.createElement("label",null,"Withdraw Password "),d.a.createElement("input",{type:"password",className:"form-control",placeholder:"Withdraw Password",name:"withPassword",onChange:this.inputChange,value:this.state.withPassword})),d.a.createElement("div",{className:"form-group"},d.a.createElement("label",null,"Note"),d.a.createElement("input",{type:"text",className:"form-control",placeholder:"Write a message (eg: Thanks for fast delivery)",name:"note",onChange:this.inputChange,value:this.state.note})),d.a.createElement("div",{className:"form-group"},d.a.createElement("div",{className:"checkbox"},d.a.createElement("input",{type:"checkbox",name:"agree",value:"check",onChange:this.inputChange})," I agree to the ",d.a.createElement(f.a,{href:"",className:"text-main"},"Terms & Conditions"))),d.a.createElement("div",{className:"form-group mt-80 d-flex align-items-center justify-content-end"},d.a.createElement("button",{className:"btn btn-main box big",onClick:this.submit},"Request Withdraw"))))),d.a.createElement("div",{className:"tab mt-3 p-2 bordered "+(1!=this.state.currentTab&&"d-none")},d.a.createElement("div",{className:"tableHold"},d.a.createElement("table",{className:"table"},d.a.createElement("thead",null,d.a.createElement("tr",{className:"whiteBg title"},d.a.createElement("td",null,"Date & Time"),d.a.createElement("td",null,"Currency"),d.a.createElement("td",null,"Transaction ID"),d.a.createElement("td",null,"Amount"),d.a.createElement("td",null,"Type"),d.a.createElement("td",null,"Reason"),d.a.createElement("td",null,"Status"),d.a.createElement("td",null,"Action"))),d.a.createElement("tbody",null,null==this.state.withdrawals?d.a.createElement(v.a,null):this.state.withdrawals.map((function(e,t){return d.a.createElement("tr",{key:t},d.a.createElement("td",{className:"time"},e.date),d.a.createElement("td",{className:"time"},e.currencySymbol),d.a.createElement("td",{className:"time"},e._id),d.a.createElement("td",{className:"time"},e.amount),d.a.createElement("td",{className:"time"},e.withType),d.a.createElement("td",{className:"time"},e.reason),d.a.createElement("td",{className:"time"},e.status," ",d.a.createElement("span",{className:"dot bg-warning"})),d.a.createElement("td",null,d.a.createElement(f.a,{className:"text-main",href:""},"View")))}))))))),d.a.createElement("div",{className:"col-sm empty-container-with-out-border right-column"},this.state.reset?d.a.createElement(v.a,null):d.a.createElement(g.a,null))))}}]),a}(d.a.Component));t.default=S},850:function(e,t,a){"use strict";var n=a(7),r=a.n(n),s=a(13),c=a(14),l=a(0),i=a.n(l),o=a(64),u=a(65);a(851),a(240);t.a=function(e){var t=Object(l.useState)(null),a=Object(c.a)(t,2),n=a[0],m=a[1],d=Object(l.useState)(null),h=Object(c.a)(d,2),f=h[0],p=h[1],E=Object(l.useState)(e.selected),b=Object(c.a)(E,2),w=b[0],v=b[1],y=function(t,a){v(t.currencySymbol),e.selectCoin(t)};Object(l.useEffect)((function(){g()}),[]);var g=function(){Object(u.l)().then(function(){var e=Object(s.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(t.data);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){m(null)}))};return i.a.createElement("div",{className:"coinSelector"},i.a.createElement("input",{type:"text",placeholder:"Search",onChange:function(e){var t=e.target.value;if(""==t)p(null);else{t=t.toLowerCase();var a=[];n.forEach((function(e){-1==e.currencyName.toLowerCase().indexOf(t)&&-1==e.currencySymbol.toLowerCase().indexOf(t)||a.push(e)})),p(a)}}}),i.a.createElement("div",{className:"bottom-border-list"},null==n?i.a.createElement(o.a,null):null==f?n.map((function(e,t){return 1==e.curnType||"BLCK"==e.currencySymbol?null:i.a.createElement("div",{key:t,className:"list-item pointer "+(e.currencySymbol==w?"active":""),onClick:function(){y(e)}},e.currencyName+" ("+e.currencySymbol+")"," ",i.a.createElement("span",{className:"fa fa-chevron-right"}))})):f.map((function(e,t){return"BLCK"==e.currencySymbol?null:i.a.createElement("div",{key:t,className:"list-item pointer "+(e.currencySymbol==w?"active":""),onClick:function(){y(e)}},e.currencyName+" ("+e.currencySymbol+")"," ",i.a.createElement("span",{className:"fa fa-chevron-right"}))}))))}},851:function(e,t,a){}}]);
//# sourceMappingURL=63.95a41621.chunk.js.map