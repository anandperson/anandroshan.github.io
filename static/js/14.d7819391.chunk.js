(this["webpackJsonpreact-redux-realworld-example-app"]=this["webpackJsonpreact-redux-realworld-example-app"]||[]).push([[14],{1196:function(e,a,t){},1197:function(e,a,t){},996:function(e,a,t){"use strict";t.d(a,"a",(function(){return J}));var n=t(8),l=t(782),c=t(14),r=t(0),s=t.n(r),i=t(758),m=t(1058),o=t(1270),u=t(1198),d=t.n(u),p=t(1200),f=t.n(p),E=t(1202),v=t.n(E),b=t(1294),h=t(767),g=t(711),N=t(1268),y=t(1201),j=t.n(y),O=t(1199),w=t.n(O),S=t(777),k=t(1269),x=t(64),P=t(7),C=t.n(P),D=t(13),_=t(1227),F=t(1267),R=t(1265),A=t(1266);t(1196);function I(e){var a=s.a.useState([]),t=Object(c.a)(a,2),n=t[0],r=t[1],o=s.a.useState([]),u=Object(c.a)(o,2),d=u[0],p=u[1],f=s.a.useState(""),E=Object(c.a)(f,2),v=E[0],b=E[1],h=function(e){var a=new FileReader;return new Promise((function(t,n){a.onload=function(e){t(e.target.result)},a.readAsDataURL(e)}))},g=function(){var a=Object(D.a)(C.a.mark((function a(t){var c,s;return C.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c=[].concat(Object(l.a)(n),Object(l.a)(t)),console.log(c),a.next=4,i=c,Promise.all(i.map(h));case 4:s=a.sent,console.log(s),p(s),r(c),e.fileChange(c);case 9:case"end":return a.stop()}var i}),a)})));return function(e){return a.apply(this,arguments)}}();return s.a.createElement(_.a,{maxWidth:"md",fullWidth:!0,open:e.open,onClose:e.handleClose,"aria-labelledby":"max-width-dialog-title",className:"upload-file-modal"},s.a.createElement(R.a,null,s.a.createElement("div",{className:"dialog-upload-desc"},s.a.createElement("div",{className:"upload-btn"},s.a.createElement(A.a,{id:"max-width-dialog-title",className:"dialog-title"},"Upload all necessary files")),s.a.createElement("div",{className:"upload-note"},s.a.createElement("span",{className:"note-text"},"Note:")," Befor submitting the files, make sure your customer is happy and has no more changes for smooth payment release")),s.a.createElement(i.a,{variant:"outlined",square:!0,className:"uploadArea "+v,onDrop:function(e){return function(e){e.preventDefault(),e.stopPropagation(),b("");var a=e.dataTransfer.files;g(a)}(e)},onDragOver:function(e){return function(e){e.preventDefault(),e.stopPropagation(),b("over")}(e)},onDragEnter:function(e){return function(e){e.preventDefault(),e.stopPropagation(),b("enter")}(e)},onDragLeave:function(e){return function(e){e.preventDefault(),e.stopPropagation(),b("")}(e)},onClick:function(e){return function(e){e.preventDefault(),e.stopPropagation(),document.querySelector(".droppedFiles").contains(e.target)||document.getElementById("gallery").click()}(e)}},s.a.createElement("div",{className:"droppedFiles"},d.map((function(a,t){return s.a.createElement("div",{className:"file"},s.a.createElement("img",{src:a}),s.a.createElement("i",{className:"fa fa-times",onClick:function(){return function(a){var t=Object(l.a)(n),c=Object(l.a)(d);delete t[a],delete c[a],r(t),p(c),e.fileChange(t)}(t)}}))}))),s.a.createElement("div",{className:"drag-droup"},"Browse / Drag and drop")),s.a.createElement("input",{type:"file",multiple:!0,id:"gallery",onChange:function(e){e.preventDefault(),e.stopPropagation(),b(""),console.log(e.target.files),g(e.target.files)},style:{display:"none"}})),s.a.createElement(F.a,null,s.a.createElement(m.a,{variant:"contained",style:{backgroundColor:"#5931ea"},className:"submit-payment",onClick:e.onSubmit},"Submit for approval and payment")))}var B=t(66),L=t(45),U=(t(1197),t(24)),q=t(15),z=t(65);function T(e){return s.a.createElement("div",{className:"hand-shake"},"start"===e.placement&&s.a.createElement(d.a,{fontSize:"large",style:{paddingRight:"8px"}}),s.a.createElement("span",{style:{fontSize:"14px",opacity:".5"}},e.text),"end"===e.placement&&s.a.createElement(d.a,{fontSize:"large",style:{paddingLeft:"8px"}}))}function W(e){var a=e.purchase.data.plan;return s.a.createElement(i.a,{variant:"outlined",square:!0,className:"chat-payment-details"},s.a.createElement("div",{className:"payment-option"},s.a.createElement("div",{className:"payment-title"},e.purchase.data.plan),s.a.createElement("div",{className:"payment-cost"},e.purchase.currency+" "+e.gig[e.purchase.data.plan+"Price"])),s.a.createElement("div",{className:"order-item font12 font-bold"},e.gig.subject),s.a.createElement("div",{className:"order-description font12 "},"Package includes the following features"),s.a.createElement(h.a,{className:"order-requirement"},e.gig.features.map((function(a){return null!=a&&1==a[e.purchase.data.plan]?s.a.createElement(g.a,null,s.a.createElement(N.a,null,s.a.createElement(w.a,null)),s.a.createElement(k.a,null,a.feature)):null})),e.purchase.data.extras.map((function(a){return s.a.createElement(g.a,null,s.a.createElement(N.a,null,s.a.createElement(w.a,null)),s.a.createElement(k.a,null,a.feature,s.a.createElement("span",{className:"pull-right"},e.purchase.currency," ",a.amount)))}))),s.a.createElement("div",{className:"delivery-details"},s.a.createElement("div",{className:"delivery-days"},s.a.createElement(f.a,null)," ",s.a.createElement("span",{className:void 0==e.purchase.data.fast?"":"strike"},e.gig[a+"Days"]," days delivery")),s.a.createElement(h.a,{className:"order-requirement"},void 0!=e.purchase.data.fast&&s.a.createElement(g.a,null,s.a.createElement(k.a,null,"Extra Fast ",e.purchase.data.days," Day(s) Delivery",s.a.createElement("span",{className:"pull-right"},e.purchase.currency+" "+e.gig.fastPrice))),void 0!=e.purchase.data.fee&&s.a.createElement(g.a,null,s.a.createElement(k.a,null,"Service Fee",s.a.createElement("span",{className:"pull-right"},e.purchase.currency+" "+e.purchase.data.fee))))),s.a.createElement("div",{className:"payment-total"},s.a.createElement("div",{className:"payment-title font12"},"TOTAL"),s.a.createElement("div",{className:"payment-cost font-bold"},e.purchase.currency+" "+e.purchase.amount)))}function M(e){return s.a.createElement("div",{className:"user-image-chat"},s.a.createElement("div",{className:"user-image"},s.a.createElement(b.a,{src:e.data.image,alt:e.data.name})),s.a.createElement("div",{className:"user-name-chat"},e.displayName&&s.a.createElement("div",{className:"chat-user-name"},e.data.name),s.a.createElement("div",{className:"chat-user-text"},e.text)))}function J(e){var a=s.a.useState(!1),t=Object(c.a)(a,2),r=t[0],u=t[1],d=s.a.useState(!1),p=Object(c.a)(d,2),f=p[0],E=p[1],h=s.a.useState(!1),g=Object(c.a)(h,2),N=g[0],y=g[1],O=s.a.useState(""),w=Object(c.a)(O,2),k=w[0],P=w[1],C=s.a.useState(0),D=Object(c.a)(C,2),_=D[0],F=D[1],R=s.a.useState(null),A=Object(c.a)(R,2),J=A[0],V=A[1],Y=s.a.useState(null),G=Object(c.a)(Y,2),H=G[0],X=G[1],K=s.a.useState(null),Q=Object(c.a)(K,2),Z=Q[0],$=Q[1],ee=s.a.useState(null),ae=Object(c.a)(ee,2),te=ae[0],ne=ae[1],le=s.a.useState([]),ce=Object(c.a)(le,2),re=ce[0],se=ce[1],ie=s.a.useState(null),me=Object(c.a)(ie,2),oe=me[0],ue=me[1],de=s.a.useState(""),pe=Object(c.a)(de,2),fe=pe[0],Ee=pe[1],ve=s.a.useState(null),be=Object(c.a)(ve,2),he=be[0],ge=be[1],Ne=s.a.useState(null),ye=Object(c.a)(Ne,2),je=ye[0],Oe=ye[1],we=s.a.useState([]),Se=Object(c.a)(we,2),ke=Se[0],xe=Se[1],Pe=s.a.useState(""),Ce=Object(c.a)(Pe,2),De=Ce[0],_e=Ce[1],Fe=s.a.useState(null),Re=Object(c.a)(Fe,2),Ae=Re[0],Ie=Re[1];s.a.useEffect((function(){Ue(),Be()}),[e.chat]);var Be=function(){if(null!=e.chat){var a={order_id:e.chat._id,gig:e.chat.postid};Object(L.k)(a).then((function(e){if(V(e.user),X(e.creator),$(e.gig),ne(e.purchase),se(e.chat),Oe(e.rating),console.log(e.log),null!=e.log){var a=e.log;a.attachments=JSON.parse(a.attachments),ue(a)}Ue()}))}},Le=function(){_e(""),ge(null),document.getElementById("attachment").value=null},Ue=function(){null!=Ae&&Ae.scrollIntoView({behavior:"smooth"})},qe=e.chat;if(null==qe||null==J||null==Z||null==te)return s.a.createElement("div",null,s.a.createElement(x.a,null));qe.sellerPanel="seller"==e.panel,qe.buyerPanel="buyer"==e.panel;var ze=qe.sellerPanel&&1==te.status,Te=2===te.status;return s.a.createElement(i.a,{variant:"outlined",square:!0,className:"chat-panel "+(Te?"accepted-view":" pending-view")},s.a.createElement("div",{className:"chat-header"},s.a.createElement("div",{className:"chat-user-info"},s.a.createElement(b.a,{src:Object(U.d)(J.avatar),alt:J.name}),s.a.createElement("span",{className:"chat-user-name"},J.name)),qe.sellerPanel&&2===te.status&&s.a.createElement("div",{className:"buyer-submit"},s.a.createElement("div",{className:"buyer-submit-text"},"Submit all files for payment release"),s.a.createElement("div",null,s.a.createElement(o.a,{variant:"extended",size:"small",color:"primary","aria-label":"add",onClick:function(){u(!0)}},"Submit & close the project")))),s.a.createElement("div",{className:"chat-container",ref:function(e){Ie(e)}},s.a.createElement("div",{className:"chat-text-area"},s.a.createElement("div",{className:"chat-content buyer-chat"},s.a.createElement(T,{placement:"start",text:"Handshake initiated"})),s.a.createElement("div",{className:"chat-content buyer-chat"},s.a.createElement(W,{gig:Z,purchase:te})),qe.buyerPanel&&s.a.createElement(s.a.Fragment,null,1==te.status&&s.a.createElement("div",{className:"chat-content buyer-chat"},s.a.createElement(M,{displayName:!0,data:qe,text:"Waiting for mutal handshake from the seller"}))),2==te.status&&s.a.createElement("div",{className:"chat-content seller-chat"},s.a.createElement("div",{className:"user-image-hand"},s.a.createElement(T,{placement:qe.buyerPanel?"end":"start",text:"Handshake Accepted"})))),ze&&s.a.createElement("div",{className:"chat-accept"},s.a.createElement("div",{className:"accept-total text-center"},s.a.createElement("div",{className:"total-amount"},te.currency," ",te.amount),s.a.createElement(m.a,{onClick:function(){Object(q.b)(!0,"Please wait...");var a=te.data;a.statusAt=(new Date).toISOString();var t={data:a,status:2,id:te._id};Object(L.t)(t).then((function(a){Object(q.b)();var t=Object(n.a)({},te);t.status=2,console.log(t),ne(t),e.updateStatus(2)}),(function(e){Object(q.b)(),Object(q.a)(!0,e.data.message)}))},variant:"contained",style:{backgroundColor:"#8bc34a"}},"Accept Handshake")),s.a.createElement("div",null,s.a.createElement(m.a,{onClick:function(){Object(q.b)(!0,"Please wait...");var a={transfer_id:te.data.refid,status:"cancel"};Object(z.z)(a).then((function(a){var t=te.data;t.statusAt=(new Date).toISOString();var l={data:t,status:-1,id:te._id};Object(L.t)(l).then((function(a){Object(q.b)();var t=Object(n.a)({},te);t.status=-1,ne(t),e.updateStatus(-1)}),(function(e){Object(q.b)(),Object(q.a)(!0,e.data.message)}))}),(function(e){Object(q.b)(),Object(q.a)(!0,e.data.message)}))},variant:"contained",style:{backgroundColor:"#ff3d00"}},"Reject"))),re.map((function(a,t){return s.a.createElement("div",{className:"chat-content "+(a.sender==Z.userid?"seller":"buyer")+"-chat"},s.a.createElement("div",{className:"user-image-hand"},a.sender!=e.currentUser._id&&s.a.createElement(b.a,{className:"chatPic",src:Object(U.c)(qe.buyerPanel?H.avatar:J.avatar),alt:qe.buyerPanel?H.name:J.name}),s.a.createElement("p",{className:"message"},a.message,void 0!=a.attachment&&null!=a.attachment&&""!=a.attachment&&s.a.createElement("div",{className:"chat-attach"},s.a.createElement("a",{href:a.attachment,target:"_blank"},"Image"==a.attachmentType?s.a.createElement("img",{src:a.attachment}):s.a.createElement(s.a.Fragment,null,s.a.createElement("i",{className:"fa fa-file"})," view attachment")))),a.sender==e.currentUser._id&&s.a.createElement(b.a,{className:"chatPic",src:Object(U.c)(e.currentUser.avatar),alt:e.currentUser.name})))})),3==te.status&&s.a.createElement("div",{className:"chat-content seller-chat"},s.a.createElement("div",{className:"d-flex align-items-start "},qe.buyerPanel&&s.a.createElement(b.a,{className:"chatPic",src:Object(U.c)(J.avatar),alt:J.name}),qe.buyerPanel?s.a.createElement("p",{className:"message"},J.name+" has submitted all the files. Release the  payments and download the file."):s.a.createElement("p",{className:"message"}," You have submitted the files and closed the project"),qe.sellerPanel&&s.a.createElement(b.a,{className:"chatPic",src:Object(U.c)(H.avatar),alt:H.name})),qe.buyerPanel&&s.a.createElement("div",{className:"release-payment"},s.a.createElement("div",{className:"release-payment-logo"},s.a.createElement(j.a,null)),s.a.createElement("div",{className:"release-payment-btn"},s.a.createElement(m.a,{variant:"contained",style:{backgroundColor:"#5931ea"},onClick:function(){E(!0)}},te.data.released?"View Files":"Release Payment and View Files")),null==je?s.a.createElement("div",{className:"release-payment-btn"},s.a.createElement(m.a,{variant:"contained",style:{backgroundColor:"#5931ea"},onClick:function(){y(!0)}},"Feedback")):s.a.createElement("div",null,s.a.createElement("p",{className:"rating-text"},[1,2,3,4,5].map((function(e,a){return e<=je.rating?s.a.createElement("i",{className:"fa fa-star"}):s.a.createElement("i",{className:"fa fa-star-o"})}))),s.a.createElement("p",{className:"review-text"},'"',je.review,'"')))),r&&qe.sellerPanel&&s.a.createElement(I,{handleClose:function(){u(!1)},open:r,fileChange:function(e){xe(e)},onSubmit:function(){if(ke.length<=0)Object(q.a)(!0,"You need to choose at least one file to submit");else{Object(q.b)(!0,"Submitting, Please wait..."),u(!1);var a={file:ke,id:te._id};Object(L.u)(a).then((function(a){Object(q.b)(),Object(q.a)(!0,"Gig submitted for approval","success"),e.updateStatus(3),Be()}),(function(e){Object(q.b)(),Object(q.a)(!0,e.data.message)}))}},purchaseId:te._id}),s.a.createElement(B.a,{displayModal:f,closeModal:function(){E(!f)}},s.a.createElement("div",{className:"review-modal"},s.a.createElement("div",{className:"d-flex align-items-center"},s.a.createElement("div",{className:"container mt-4 purchase-modal"},s.a.createElement("h5",{style:{fontWeight:"bold",marginBottom:"1rem",marginLeft:"0.5rem"}},"All files"),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col down-hold",style:{textAlign:"center"}},te.data.released?null!=oe&&void 0!=oe.attachments&&oe.attachments.map((function(e,a){return s.a.createElement("div",{className:"down-item",style:{backgroundImage:"Image"==e.contenttype?"url(".concat(e.content_url,")"):""}},s.a.createElement("button",{type:"button",className:"review-btn",onClick:function(){window.open(e.content_url)}}," Download "))})):null!=oe&&void 0!=oe.attachments&&oe.attachments.map((function(e,a){return s.a.createElement("div",{className:"down-item"},s.a.createElement("i",{className:"fa fa-eye-slash"}))})))),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("br",null))),te.data.released?null:s.a.createElement("div",{className:"modal-footer",style:{borderTop:"none"}},"Release the full payment to download all original files",s.a.createElement("button",{type:"button",className:"review-btn",style:{marginLeft:"1rem"},onClick:function(){Object(q.b)(!0,"Please wait...");var e={transfer_id:te.data.refid,status:"confirm"};Object(z.z)(e).then((function(e){if(console.log(e),1==e.Status){var a=te.data;a.released=!0;var t={data:a,status:3,id:te._id};Object(L.t)(t).then((function(e){Object(q.b)();var t=Object(n.a)({},te);t.data=a,ne(t)}),(function(e){Object(q.b)(),Object(q.a)(!0,e.data.message)}))}else Object(q.b)(),Object(q.a)(!0,e.Message)}),(function(e){Object(q.b)(),Object(q.a)(!0,e.data.message)}))}}," Release ")))),s.a.createElement(B.a,{displayModal:N,closeModal:function(){y(!N)}},null!=H&&s.a.createElement("div",null,s.a.createElement("div",{className:"d-flex align-items-center",style:{padding:"1rem"}},s.a.createElement("div",{className:"container mt-4 review-modal"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col"},s.a.createElement("h5",{style:{fontWeight:"bold",marginBottom:"1rem"}},"Rate Your Experience with the seller"))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-3 col-sm-3 col-md-3"},s.a.createElement("img",{style:{borderRadius:"50%"},className:"media-object pic ",src:Object(U.d)(H.avatar),alt:"..."})),s.a.createElement("div",{className:"col-6 col-sm-8 col-md-4"},s.a.createElement("p",{className:"para-text"},H.name))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"rate"},s.a.createElement("input",{type:"radio",id:"star5",name:"rate",value:"5",onClick:function(){F(5)}}),s.a.createElement("label",{for:"star5",title:"text"}),s.a.createElement("input",{type:"radio",id:"star4",name:"rate",value:"4",onClick:function(){F(4)}}),s.a.createElement("label",{for:"star4",title:"text"}),s.a.createElement("input",{type:"radio",id:"star3",name:"rate",value:"3",onClick:function(){F(3)}}),s.a.createElement("label",{for:"star3",title:"text"}),s.a.createElement("input",{type:"radio",id:"star2",name:"rate",value:"2",onClick:function(){F(2)}}),s.a.createElement("label",{for:"star2",title:"text"}),s.a.createElement("input",{type:"radio",id:"star1",name:"rate",value:"1",onClick:function(){F(1)}}),s.a.createElement("label",{for:"star1",title:"text"})),s.a.createElement("textarea",{className:"form-control pull-left p-1 review-text-area",placeholder:"Your review will help others",rows:"3",name:"text",value:k,onChange:function(e){P(e.target.value)}})))),s.a.createElement("div",{className:"modal-footer",style:{borderTop:"none"}},s.a.createElement("button",{type:"button",className:"review-btn",onClick:function(){if(0==_||""==k)Object(q.a)(!0,"Please give both rating and review");else{Object(q.b)(!0,"Please wait...");var e={postid:Z._id,purchaseid:te._id,rating:_,review:k};Object(L.s)(e).then((function(e){y(!1),Object(q.b)(),Be()}),(function(e){Object(q.b)(),Object(q.a)(!0,e.data.message)}))}}}," Submit "))))),Te&&s.a.createElement("div",{className:"chat-send"},s.a.createElement(S.a,{placeholder:"Send details and reference documents",variant:"outlined",fullWidth:!0,className:"send-input",value:fe,onChange:function(e){Ee(e.target.value)}}),s.a.createElement("div",{className:"send-attach"},s.a.createElement("div",{className:"attach-file",onClick:function(){document.getElementById("attachment").click()}},s.a.createElement(v.a,null),s.a.createElement("input",{type:"file",name:"attachment",id:"attachment",style:{display:"none"},onChange:function(e){var a=e.target.files[0];ge(a);var t=new FileReader;t.onload=function(e){_e(e.target.result)},t.readAsDataURL(a)}}),s.a.createElement("span",null,"PNG, Jpeg, SVG, PDF, Ai, XD, EPS, PSD")),null!=he&&s.a.createElement("div",{className:"d-flex align-items-center"}," ",s.a.createElement("a",{href:De,target:"_blank"},he.name)," ",s.a.createElement("i",{className:"fa fa-times pl-2",onClick:Le})," "),s.a.createElement("div",{className:"send-btn"},s.a.createElement(m.a,{variant:"contained",style:{backgroundColor:"#5931ea"},onClick:function(){var a={purchaseid:te._id,receiver:"seller"==e.panel?te.userid:Z.userid,message:fe};null!=he&&(a.file=he),Object(L.a)(a).then((function(e){Ee(""),Le();var a=Object(l.a)(re);a.push(e),se(a)}),(function(e){Object(q.a)(!0,e.data.message)}))}},"Send")))))}}}]);
//# sourceMappingURL=14.d7819391.chunk.js.map